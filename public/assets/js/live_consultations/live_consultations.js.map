{"version":3,"sources":["webpack:///./resources/assets/js/live_consultations/live_consultations.js"],"names":["$","DataTable","processing","serverSide","ajax","url","liveConsultationUrl","data","status","find","val","columnDefs","targets","defaultContent","columns","row","id","consultation_title","name","render","consultation_date","moment","format","adminRole","doctorRole","status_text","patientRole","meta","join_url","start_url","prepareTemplateRender","change","reload","drawCallback","this","api","state","clear","select2","width","on","resetModalForm","patientId","changeTypeNumber","removeAttr","window","selector","liveConsultationTypeNumber","type","dataType","consultation_type","patient_id","success","length","empty","each","i","v","append","attr","text","prop","document","ready","datetimepicker","DatetimepickerDefaults","useCurrent","sideBySide","minDate","Date","event","preventDefault","loadingButton","jQuery","button","liveConsultationCreateUrl","serialize","result","displaySuccessMessage","message","modal","setTimeout","error","printErrorMessage","manageAjaxErrors","complete","renderData","liveConsultation","consultation_duration_minutes","trigger","doctor_id","host_video","participant_video","type_number","description","ajaxCallCompleted","ajaxCallIsRunning","ajaxCallInProgress","liveConsultationId","currentTarget","startRenderData","user","full_name","zoomLiveData","addClass","deleteItem","statusId","consultationId","showModal","patient","doctor","opd_patient","opd_number","ipd_patient","ipd_number","isEmpty","userId","userZoomRenderData","userZoomData","zoom_api_key","zoom_api_secret","zoomCredentialCreateUrl"],"mappings":"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","file":"/assets/js/live_consultations/live_consultations.js","sourcesContent":["'use strict';\n\nlet tbl = $('#liveConsultationTable').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'desc']],\n    ajax: {\n        url: liveConsultationUrl,\n        data: function (data) {\n            data.status = $('#statusArr').find('option:selected').val();\n        },\n    },\n    columnDefs: [\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n        {\n            'targets': [1],\n            'width': '15%',\n        },\n        {\n            'targets': [5, 7],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '8%',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                return '<a href=\"#\" class=\"show-data\" data-id=\"' + row.id +\n                    '\">' + row.consultation_title + '</a>';\n            },\n            name: 'consultation_title',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                if (row.consultation_date === null) {\n                    return 'N/A';\n                }\n\n                return moment(row.consultation_date, 'YYYY-MM-DD hh:mm:ss').\n                    format('Do MMM, YYYY hh:mm A');\n            },\n            name: 'consultation_date',\n        },\n        {\n            data: 'user.full_name',\n            name: 'user.first_name',\n        },\n        {\n            data: 'doctor.user.full_name',\n            name: 'doctor.user.first_name',\n        },\n        {\n            data: 'patient.user.full_name',\n            name: 'patient.user.first_name',\n        },\n        {\n            data: function (row) {\n                if (adminRole || doctorRole) {\n                    return `<select class=\"change-status\" data-id=\"${row.id}\">` +\n                        `<option value=\"0\" ${row.status == 0 ? 'selected' : ''}>Awaited</option>\n                            <option value=\"1\" ${row.status == 1\n                            ? 'selected'\n                            : ''}>Cancelled</option>\n                            <option value=\"2\" ${row.status == 2\n                            ? 'selected'\n                            : ''}>Finished</option>`\n                        + `</select>`;\n                }\n                return row.status_text;\n            },\n            name: 'user.last_name',\n        },\n        {\n            data: 'password',\n            name: 'password',\n        },\n        {\n            data: function (row) {\n                let data = [\n                    {\n                        'id': row.id,\n                        'status': row.status,\n                        'url': (patientRole)\n                            ? row.meta.join_url\n                            : row.meta.start_url,\n                        'title': (patientRole)\n                            ? 'Join Meeting'\n                            : 'Start Meeting',\n                        'isDoctor': doctorRole,\n                        'isAdmin': adminRole,\n                        'isMeetingFinished': row.status == 2 ? true : false,\n                    }];\n\n                return prepareTemplateRender('#liveConsultationActionTemplate',\n                    data);\n            }, name: 'patient.user.last_name',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#statusArr').change(function () {\n            $('#liveConsultationTable').DataTable().ajax.reload(null, true);\n        });\n    },\n    drawCallback: function () {\n        this.api().state.clear();\n        $('.change-status').select2({\n            width: '100%',\n        });\n    },\n});\n\n$('#addModal').on('hidden.bs.modal', function () {\n    resetModalForm('#addNewForm', '#validationErrorsBox');\n});\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editValidationErrorsBox');\n});\n\nlet patientId = null;\n$('.consultation-type, .edit-consultation-type').on('change', function () {\n    changeTypeNumber(\n        '.consultation-type-number, .edit-consultation-type-number',\n        $(this).val(), patientId);\n});\n$('.patient-name, .edit-patient-name').on('change', function () {\n    if ($(this).val() !== '') {\n        patientId = $(this).val();\n        $('.consultation-type, .edit-consultation-type').removeAttr('disabled');\n    }\n});\n\nwindow.changeTypeNumber = function (selector, id, patientId) {\n    if ($(this).val() !== '') {\n        $.ajax({\n            url: liveConsultationTypeNumber,\n            type: 'get',\n            dataType: 'json',\n            data: {\n                consultation_type: id,\n                patient_id: patientId,\n            },\n            success: function (data) {\n                if (data.data.length !== 0) {\n                    $(selector).empty();\n                    $(selector).removeAttr('disabled');\n                    $.each(data.data, function (i, v) {\n                        $(selector).\n                            append($('<option></option>').\n                                attr('value', i).\n                                text(v));\n                    });\n                } else {\n                    $(selector).prop('disabled', true);\n                }\n            },\n        });\n    }\n    $(selector).empty();\n    $(selector).prop('disabled', true);\n};\n\n$(document).ready(function () {\n    $('.doctor-name,.patient-name,.consultation-type,.consultation-type-number,.change-status, .edit-doctor-name,.edit-patient-name,.edit-consultation-type,.edit-consultation-type-number,.edit-change-status, #statusArr').\n        select2({\n            width: '100%',\n        });\n    $('.consultation-date, .edit-consultation-date').\n        datetimepicker(DatetimepickerDefaults({\n            format: 'YYYY-MM-DD h:mm A',\n            useCurrent: true,\n            sideBySide: true,\n            minDate: new Date(),\n        }));\n});\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: liveConsultationCreateUrl,\n        type: 'POST',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addModal').modal('hide');\n                $('#liveConsultationTable').\n                    DataTable().\n                    ajax.\n                    reload(null, false);\n                setTimeout(function () {\n                    loadingButton.button('reset');\n                }, 2500);\n            }\n        },\n        error: function (result) {\n            printErrorMessage('#validationErrorsBox', result);\n            setTimeout(function () {\n                loadingButton.button('reset');\n            }, 2000);\n        },\n    });\n});\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#liveConsultationId').val();\n    $.ajax({\n        url: liveConsultationUrl + '/' + id,\n        type: 'post',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                $('#liveConsultationTable').\n                    DataTable().\n                    ajax.\n                    reload(null, false);\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: liveConsultationUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let liveConsultation = result.data;\n                $('#liveConsultationId').val(liveConsultation.id);\n                $('.edit-consultation-title').\n                    val(liveConsultation.consultation_title);\n                $('.edit-consultation-date').\n                    val(moment(liveConsultation.consultation_date).\n                        format('YYYY-MM-DD h:mm A'));\n                $('.edit-consultation-duration-minutes').\n                    val(liveConsultation.consultation_duration_minutes);\n                $('.edit-patient-name').\n                    val(liveConsultation.patient_id).\n                    trigger('change');\n                $('.edit-doctor-name').\n                    val(liveConsultation.doctor_id).\n                    trigger('change');\n                $('.host-enable,.host-disabled').prop('checked', false);\n                if (liveConsultation.host_video == 1) {\n                    $(`input[name=\"host_video\"][value=${liveConsultation.host_video}]`).\n                        prop('checked', true);\n                } else {\n                    $(`input[name=\"host_video\"][value=${liveConsultation.host_video}]`).\n                        prop('checked', true);\n                }\n                $('.client-enable,.client-disabled').prop('checked', false);\n                if (liveConsultation.participant_video == 1) {\n                    $(`input[name=\"participant_video\"][value=${liveConsultation.participant_video}]`).\n                        prop('checked', true);\n                } else {\n                    $(`input[name=\"participant_video\"][value=${liveConsultation.participant_video}]`).\n                        prop('checked', true);\n                }\n                $('.edit-consultation-type').val(liveConsultation.type).\n                    trigger('change');\n                $('.edit-consultation-type-number').\n                    val(liveConsultation.type_number).\n                    trigger('change');\n                $('.edit-description').val(liveConsultation.description);\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let liveConsultationId = $(event.currentTarget).data('id');\n    renderData(liveConsultationId);\n});\n\n$(document).on('click', '.start-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let liveConsultationId = $(event.currentTarget).data('id');\n    startRenderData(liveConsultationId);\n});\n\nwindow.startRenderData = function (id) {\n    $.ajax({\n        url: liveConsultationUrl + '/' + id + '/start',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let liveConsultation = result.data;\n                $('#startLiveConsultationId').\n                    val(liveConsultation.liveConsultation.id);\n                $('.start-modal-title').\n                    text(liveConsultation.liveConsultation.consultation_title);\n                $('.host-name').\n                    text(liveConsultation.liveConsultation.user.full_name);\n                $('.date').\n                    text(liveConsultation.liveConsultation.consultation_date);\n                $('.minutes').\n                    text(\n                        liveConsultation.liveConsultation.consultation_duration_minutes);\n                $('#startModal').\n                    find('.status').\n                    append((liveConsultation.zoomLiveData.data.status ===\n                        'started') ? $('.status').text('Started') : $(\n                        '.status').text('Awaited'));\n                $('.start').\n                    attr('href', (patientRole)\n                        ? liveConsultation.liveConsultation.meta.join_url\n                        : ((liveConsultation.zoomLiveData.data.status ===\n                            'started')\n                            ? $('.start').addClass('disabled')\n                            : liveConsultation.liveConsultation.meta.start_url),\n                    );\n                $('#startModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('click', '.delete-btn', function (event) {\n    let liveConsultationId = $(event.currentTarget).data('id');\n    deleteItem(\n        liveConsultationUrl + '/' + liveConsultationId,\n        '#liveConsultationTable',\n        'Live Consultation',\n    );\n});\n\n$(document).on('change', '.change-status', function () {\n    let statusId = $(this).val();\n    $.ajax({\n        url: liveConsultationUrl + '/change-status',\n        type: 'GET',\n        data: { statusId: statusId, id: $(this).data('id') },\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#liveConsultationTable').\n                    DataTable().\n                    ajax.\n                    reload(null, false);\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n});\n\n$(document).on('click', '.show-data', function (event) {\n    let consultationId = $(event.currentTarget).data('id');\n    $.ajax({\n        url: liveConsultationUrl + '/' + consultationId,\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let liveConsultation = result.data.liveConsultation;\n                let showModal = $('#showModal');\n                $('#startLiveConsultationId').val(liveConsultation.id);\n                $('#consultationTitle').\n                    text(liveConsultation.consultation_title);\n                $('#consultationDate').text(liveConsultation.consultation_date);\n                $('#consultationDurationMinutes').\n                    text(liveConsultation.consultation_duration_minutes);\n                $('#consultationPatient').\n                    text(liveConsultation.patient.user.full_name);\n                $('#consultationDoctor').\n                    text(liveConsultation.doctor.user.full_name);\n                (liveConsultation.type == 0) ? showModal.find(\n                    '#consultationType').append('OPD') : showModal.find(\n                    '#consultationType').append('IPD');\n                (liveConsultation.type == 0)\n                    ? showModal.find('#consultationTypeNumber').\n                        append(liveConsultation.opd_patient.opd_number)\n                    : showModal.find('#consultationTypeNumber').\n                        append(liveConsultation.ipd_patient.ipd_number);\n                (liveConsultation.host_video === 0) ? $(\n                    '#consultationHostVideo').text('Disable') : $(\n                    '#consultationHostVideo').text('Enable');\n                (liveConsultation.participant_video === 0) ? $(\n                    '#consultationParticipantVideo').text('Disable') : $(\n                    '#consultationParticipantVideo').text('Enable');\n                isEmpty(liveConsultation.description) ? $(\n                    '#consultationDescription').text('N/A') : $(\n                    '#consultationDescription').\n                    text(liveConsultation.description);\n                showModal.modal('show');\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n});\n$('#showModal').on('hidden.bs.modal', function () {\n    $(this).\n        find(\n            '#consultationTitle, #consultationDate, #consultationDurationMinutes, #consultationPatient, #consultationDoctor, #consultationType, #consultationTypeNumber, #consultationHostVideo, #consultationParticipantVideo, #consultationDescription').\n        empty();\n});\n\n$(document).on('click', '.add-credential', function () {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let userId = $('#userId').val();\n    userZoomRenderData(userId);\n});\n\nwindow.userZoomRenderData = function (id) {\n    $.ajax({\n        url: 'user-zoom-credential/' + id + '/fetch',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let userZoomData = result.data;\n                if (!isEmpty(userZoomData)) {\n                    $('#zoomApiKey').val(userZoomData.zoom_api_key);\n                    $('#zoomApiSecret').val(userZoomData.zoom_api_secret);\n                }\n                $('#addCredential').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('submit', '#addZoomForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnZoomSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: zoomCredentialCreateUrl,\n        type: 'POST',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addCredential').modal('hide');\n                setTimeout(function () {\n                    loadingButton.button('reset');\n                }, 2500);\n            }\n        },\n        error: function (result) {\n            printErrorMessage('#credentialValidationErrorsBox', result);\n            setTimeout(function () {\n                loadingButton.button('reset');\n            }, 2000);\n        },\n    });\n});\n"],"sourceRoot":""}