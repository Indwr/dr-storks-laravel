{"version":3,"sources":["webpack:///./resources/assets/js/ipd_bills/ipd_bills.js"],"names":["totalCharges","totalPayments","grossTotal","discountPercent","taxPercentage","otherCharges","netPayabelAmount","totalDiscount","totalTax","$","document","ready","billstaus","prop","calculateIpdBill","text","on","this","id","parseInt","removeCommas","val","e","preventDefault","screenLock","attr","loadingButton","jQuery","find","button","formData","FormData","append","ajax","url","ipdBillSaveUrl","type","dataType","data","processData","contentType","success","result","displaySuccessMessage","message","window","location","reload","error","UnprocessableInputError","complete","screenUnLock","isNaN","percentage","html","addCommas","percent","total"],"mappings":"MAAA,IAAIA,EAAe,EACfC,EAAgB,EAChBC,EAAa,EACbC,EAAkB,EAClBC,EAAgB,EAChBC,EAAe,EACfC,EAAmB,EACnBC,EAAgB,EAChBC,EAAW,EAEfC,EAAEC,UAAUC,OAAM,WACG,GAAbC,WACAH,EAAE,oDACEI,KAAK,YAAY,GAEzBC,mBACIZ,GAAc,IACdO,EAAE,eAAeM,KAAK,GACtBN,EAAE,oDACEI,KAAK,YAAY,OAG7BJ,EAAE,oDACEO,GAAG,SAAS,WACO,mBAAXC,KAAKC,IAAsC,iBAAXD,KAAKC,IACjCC,SAASC,aAAaX,EAAEQ,MAAMI,QAAU,KACxCZ,EAAEQ,MAAMI,IAAI,KAGpBP,sBAERL,EAAEC,UAAUM,GAAG,SAAU,gBAAgB,SAAUM,GAC/CA,EAAEC,iBACFd,EAAE,mDACEI,KAAK,YAAY,GACrBW,aACAf,EAAE,mBAAmBgB,KAAK,YAAY,GACtC,IAAIC,EAAgBC,OAAOV,MAAMW,KAAK,mBACtCF,EAAcG,OAAO,WAErBf,mBACA,IAAIgB,EAAW,IAAIC,SAAStB,EAAEQ,MAAM,IACpCa,EAASE,OAAO,gBAAiBhC,GACjC8B,EAASE,OAAO,iBAAkB/B,GAClC6B,EAASE,OAAO,cAAe9B,GAC/B4B,EAASE,OAAO,qBAAsB1B,GAEtCG,EAAEwB,KAAK,CACHC,IAAKC,eACLC,KAAM,OACNC,SAAU,OACVC,KAAMR,EACNS,aAAa,EACbC,aAAa,EACbC,QAAS,SAAUC,GACfC,sBAAsBD,EAAOE,SAC7BC,OAAOC,SAASC,UAEpBC,MAAO,SAAUN,GACbO,wBAAwBP,GACxBjC,EAAE,mBAAmBgB,KAAK,YAAY,IAE1CyB,SAAU,WACNC,eACAzB,EAAcG,OAAO,eAKjCgB,OAAO/B,iBAAmB,WAEtBd,EAAemB,SAASC,aAAaX,EAAE,iBAAiBM,SACxDd,EAAgBkB,SAASC,aAAaX,EAAE,kBAAkBM,SAC1Db,EAAaiB,SAASC,aAAaX,EAAE,eAAeM,SAEpDZ,EAAkBgB,SAASC,aAAaX,EAAE,oBAAoBY,QAC9DjB,EAAgBe,SAASC,aAAaX,EAAE,kBAAkBY,QAC1DhB,EAAec,SAASC,aAAaX,EAAE,iBAAiBY,QAExDlB,EAAmBiD,MAAMjD,GAAoB,EAAIA,EACjDC,EAAiBgD,MAAMhD,GAAkB,EAAIA,EAC7CC,EAAgB+C,MAAM/C,GAAiB,EAAIA,EAI3CE,EAAgB8C,WAAWlD,EAAiBH,GAC5CQ,EAAW6C,WAAWjD,EAAeJ,IAErCM,EAAoBN,EAAeK,EAAeG,GAC7CP,EAAgBM,IACE,EACnBE,EAAE,eAAe6C,KAAK,WAEtBhD,EAAmB,EACnBG,EAAE,eAAe6C,KAAK,SAG1B7C,EAAE,qBAAqBM,KAAKwC,UAAUjD,KAE1CuC,OAAOQ,WAAa,SAAUG,EAASC,GACnC,OAASD,EAAU,IAAOC,I","file":"/assets/js/ipd_bills/ipd_bills.js","sourcesContent":["let totalCharges = 0;\nlet totalPayments = 0;\nlet grossTotal = 0;\nlet discountPercent = 0;\nlet taxPercentage = 0;\nlet otherCharges = 0;\nlet netPayabelAmount = 0;\nlet totalDiscount = 0;\nlet totalTax = 0;\n\n$(document).ready(function () {\n    if (billstaus == 1) {\n        $(' #discountPercent, #taxPercentage,#otherCharges ').\n            prop('disabled', true);\n    }\n    calculateIpdBill();\n    if (grossTotal <= 0) {\n        $('#grossTotal').text(0);\n        $(' #discountPercent, #taxPercentage,#otherCharges ').\n            prop('disabled', true);\n    }\n});\n$(' #discountPercent, #taxPercentage, #otherCharges').\n    on('keyup', function () {\n        if (this.id == 'discountPercent' || this.id == 'taxPercentage') {\n            if (parseInt(removeCommas($(this).val())) > 100) {\n                $(this).val(100);\n            }\n        }\n        calculateIpdBill();\n    });\n$(document).on('submit', '#ipdBillForm', function (e) {\n    e.preventDefault();\n    $(' #discountPercent, #taxPercentage,#otherCharges').\n        prop('disabled', false);\n    screenLock();\n    $('#saveIpdBillbtn').attr('disabled', true);\n    let loadingButton = jQuery(this).find('#saveIpdBillbtn');\n    loadingButton.button('loading');\n\n    calculateIpdBill();\n    let formData = new FormData($(this)[0]);\n    formData.append('total_charges', totalCharges);\n    formData.append('total_payments', totalPayments);\n    formData.append('gross_total', grossTotal);\n    formData.append('net_payable_amount', netPayabelAmount);\n\n    $.ajax({\n        url: ipdBillSaveUrl,\n        type: 'POST',\n        dataType: 'json',\n        data: formData,\n        processData: false,\n        contentType: false,\n        success: function (result) {\n            displaySuccessMessage(result.message);\n            window.location.reload();\n        },\n        error: function (result) {\n            UnprocessableInputError(result);\n            $('#saveIpdBillbtn').attr('disabled', false);\n        },\n        complete: function () {\n            screenUnLock();\n            loadingButton.button('reset');\n        },\n    });\n\n});\nwindow.calculateIpdBill = function () {\n\n    totalCharges = parseInt(removeCommas($('#totalCharges').text()));\n    totalPayments = parseInt(removeCommas($('#totalPayments').text()));\n    grossTotal = parseInt(removeCommas($('#grossTotal').text()));\n\n    discountPercent = parseInt(removeCommas($('#discountPercent').val()));\n    taxPercentage = parseInt(removeCommas($('#taxPercentage').val()));\n    otherCharges = parseInt(removeCommas($('#otherCharges').val()));\n\n    discountPercent = (isNaN(discountPercent)) ? 0 : discountPercent;\n    taxPercentage = (isNaN(taxPercentage)) ? 0 : taxPercentage;\n    otherCharges = (isNaN(otherCharges)) ? 0 : otherCharges;\n\n    //calculate\n    let total = totalCharges - (totalPayments - otherCharges);\n    totalDiscount = percentage(discountPercent, totalCharges);\n    totalTax = percentage(taxPercentage, totalCharges);\n\n    netPayabelAmount = (totalCharges + otherCharges + totalTax) -\n        (totalPayments + totalDiscount);\n    if (netPayabelAmount > 0)\n        $('#billStatus').html('UnPaid');\n    else {\n        netPayabelAmount = 0;\n        $('#billStatus').html('Paid');\n\n    }\n    $('#netPayabelAmount').text(addCommas(netPayabelAmount));\n};\nwindow.percentage = function (percent, total) {\n    return ((percent / 100) * total);\n};\n"],"sourceRoot":""}