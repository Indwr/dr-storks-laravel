{"version":3,"sources":["webpack:///./resources/assets/js/beds/create-edit.js"],"names":["$","document","ready","select2","width","on","event","preventDefault","loadingButton","jQuery","this","find","button","ajax","url","bedCreateUrl","type","data","serialize","success","result","displaySuccessMessage","message","modal","DataTable","reload","error","printErrorMessage","complete","ajaxCallIsRunning","ajaxCallInProgress","bedId","currentTarget","renderData","window","id","bedUrl","val","name","bed_type","trigger","description","charge","ajaxCallCompleted","manageAjaxErrors","UnprocessableInputError","resetModalForm"],"mappings":"AAAAA,EAAEC,UAAUC,OAAM,WACd,aAEAF,EAAE,yBAAyBG,QAAQ,CAC/BC,MAAO,YAIfJ,EAAEC,UAAUI,GAAG,SAAU,eAAe,SAAUC,GAC9CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,YACtCH,EAAcI,OAAO,WACrBZ,EAAEa,KAAK,CACHC,IAAKC,aACLC,KAAM,OACNC,KAAMjB,EAAEU,MAAMQ,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7BtB,EAAE,aAAauB,MAAM,QACrBvB,EAAE,YAAYwB,YAAYX,KAAKY,OAAO,MAAM,KAGpDC,MAAO,SAAUN,GACbO,kBAAkB,uBAAwBP,IAE9CQ,SAAU,WACNpB,EAAcI,OAAO,eAKjCZ,EAAEC,UAAUI,GAAG,QAAS,aAAa,SAAUC,GAC3C,IAAIuB,kBAAJ,CAGAC,qBACA,IAAIC,EAAQ/B,EAAEM,EAAM0B,eAAef,KAAK,MACxCgB,WAAWF,OAGfG,OAAOD,WAAa,SAAUE,GAC1BnC,EAAEa,KAAK,CACHC,IAAKsB,OAAS,IAAMD,EAAK,QACzBnB,KAAM,MACNG,QAAS,SAAUC,GACXA,EAAOD,UACPnB,EAAE,UAAUqC,IAAIjB,EAAOH,KAAKkB,IAC5BnC,EAAE,aAAaqC,IAAIjB,EAAOH,KAAKqB,MAC/BtC,EAAE,gBAAgBqC,IAAIjB,EAAOH,KAAKsB,UAAUC,QAAQ,kBACpDxC,EAAE,oBAAoBqC,IAAIjB,EAAOH,KAAKwB,aACtCzC,EAAE,eAAeqC,IAAIjB,EAAOH,KAAKyB,QACjC1C,EAAE,gBAAgBwC,QAAQ,SAC1BxC,EAAE,cAAcuB,MAAM,QACtBoB,sBAGRjB,MAAO,SAAUN,GACbwB,iBAAiBxB,OAK7BpB,EAAEC,UAAUI,GAAG,SAAU,aAAa,SAAUC,GAC5CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,gBACtCH,EAAcI,OAAO,WACrB,IAAIuB,EAAKnC,EAAE,UAAUqC,MACrBrC,EAAEa,KAAK,CACHC,IAAKsB,OAAS,IAAMD,EACpBnB,KAAM,QACNC,KAAMjB,EAAEU,MAAMQ,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7BtB,EAAE,cAAcuB,MAAM,QACtBvB,EAAE,YAAYwB,YAAYX,KAAKY,OAAO,MAAM,KAGpDC,MAAO,SAAUN,GACbyB,wBAAwBzB,IAE5BQ,SAAU,WACNpB,EAAcI,OAAO,eAKjCZ,EAAE,aAAaK,GAAG,mBAAmB,WACjCyC,eAAe,cAAe,wBAC9B9C,EAAE,YAAYqC,IAAI,IAAIG,QAAQ,qBAGlCxC,EAAE,cAAcK,GAAG,mBAAmB,WAClCyC,eAAe,YAAa","file":"/assets/js/beds/create-edit.js","sourcesContent":["$(document).ready(function () {\n    'use strict';\n\n    $('#bedType,#editBedType').select2({\n        width: '100%',\n    });\n});\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: bedCreateUrl,\n        type: 'POST',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addModal').modal('hide');\n                $('#bedsTbl').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            printErrorMessage('#validationErrorsBox', result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let bedId = $(event.currentTarget).data('id');\n    renderData(bedId);\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: bedUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#bedId').val(result.data.id);\n                $('#editName').val(result.data.name);\n                $('#editBedType').val(result.data.bed_type).trigger('change.select2');\n                $('#editDescription').val(result.data.description);\n                $('#editCharge').val(result.data.charge);\n                $('.price-input').trigger('input');\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#bedId').val();\n    $.ajax({\n        url: bedUrl + '/' + id,\n        type: 'patch',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                $('#bedsTbl').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            UnprocessableInputError(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$('#addModal').on('hidden.bs.modal', function () {\n    resetModalForm('#addNewForm', '#validationErrorsBox');\n    $('#bedType').val('').trigger('change.select2');\n});\n\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editValidationErrorsBox');\n});\n"],"sourceRoot":""}