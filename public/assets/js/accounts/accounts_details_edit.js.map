{"version":3,"sources":["webpack:///./resources/assets/js/accounts/accounts_details_edit.js"],"names":["$","document","on","event","preventDefault","loadingButton","jQuery","this","find","button","id","val","url","accountUrl","data","editRecordWithFormData","window","formData","formSelector","serialize","ajax","type","success","result","displaySuccessMessage","message","modal","setTimeout","location","reload","error","UnprocessableInputError","complete","ajaxCallIsRunning","ajaxCallInProgress","accountId","currentTarget","renderData","name","description","status","prop","ajaxCallCompleted","manageAjaxErrors"],"mappings":"mBAIAA,EAAEC,UAAUC,GAAG,SAAU,aAAa,SAAUC,GAC5CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,gBACtCH,EAAcI,OAAO,WACrB,IAAIC,EAAKV,EAAE,cAAcW,MACrBC,EAAMC,WAAa,MAAOH,EAC1BI,EAAO,CACP,aAAgBd,EAAEO,MAClB,IAAOK,EACP,KAAQ,MACR,cAZQ,gBAcZG,uBAAuBD,EAAMT,MAGjCW,OAAOD,uBAAyB,SAAUD,EAAMT,GAC5C,IAAIY,EAAkC,KAAtBH,EAAKI,aAAuBJ,EAAKG,SAAWjB,EACxDc,EAAKI,cAAcC,YACvBnB,EAAEoB,KAAK,CACHR,IAAKE,EAAKF,IACVS,KAAMP,EAAKO,KACXP,KAAMG,EACNK,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7BzB,EAAE,cAAc0B,MAAM,QACtBC,YAAW,WACPX,OAAOY,SAASC,WACjB,OAGXC,MAAO,SAAUP,GACbQ,wBAAwBR,IAE5BS,SAAU,WACN3B,EAAcI,OAAO,aAKjCT,EAAEC,UAAUC,GAAG,QAAS,aAAa,SAAUC,GAC3C,IAAI8B,kBAAJ,CAGAC,qBACA,IAAIC,EAAYnC,EAAEG,EAAMiC,eAAetB,KAAK,MAC5CuB,WAAWF,OAGfnB,OAAOqB,WAAa,SAAU3B,GAC1BV,EAAEoB,KAAK,CACHR,IAAKC,WAAa,MAAOH,EAAK,QAC9BW,KAAM,MACNC,QAAS,SAAUC,GACXA,EAAOD,UACPtB,EAAE,cAAcW,IAAIY,EAAOT,KAAKJ,IAChCV,EAAE,aAAaW,IAAIY,EAAOT,KAAKwB,MAC/BtC,EAAE,oBAAoBW,IAAIY,EAAOT,KAAKyB,aAClChB,EAAOT,KAAK0B,QACZxC,EAAE,iBAAiBW,IAAI,GAAG8B,KAAK,WAAW,GAEtB,GAApBlB,EAAOT,KAAKO,KACZrB,EAAE,cAAcyC,KAAK,WAAW,GAEhCzC,EAAE,eAAeyC,KAAK,WAAW,GAErCzC,EAAE,cAAc0B,MAAM,QACtBgB,sBAGRZ,MAAO,SAAUP,GACboB,iBAAiBpB,Q","file":"/assets/js/accounts/accounts_details_edit.js","sourcesContent":["'use strict';\n\nlet tableName = '#accountsTbl';\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#accountId').val();\n    let url = accountUrl + '/' + +id;\n    let data = {\n        'formSelector': $(this),\n        'url': url,\n        'type': 'PUT',\n        'tableSelector': tableName,\n    };\n    editRecordWithFormData(data, loadingButton);\n});\n\nwindow.editRecordWithFormData = function (data, loadingButton) {\n    let formData = (data.formSelector === '') ? data.formData : $(\n        data.formSelector).serialize();\n    $.ajax({\n        url: data.url,\n        type: data.type,\n        data: formData,\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#EditModal').modal('hide');\n                setTimeout(function () {\n                    window.location.reload();\n                }, 3000);\n            }\n        },\n        error: function (result) {\n            UnprocessableInputError(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n};\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let accountId = $(event.currentTarget).data('id');\n    renderData(accountId);\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: accountUrl + '/' + +id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#accountId').val(result.data.id);\n                $('#editName').val(result.data.name);\n                $('#editDescription').val(result.data.description);\n                if (result.data.status) {\n                    $('#editIsActive').val(1).prop('checked', true);\n                }\n                if (result.data.type == 1) {\n                    $('#editDebit').prop('checked', true);\n                } else {\n                    $('#editCredit').prop('checked', true);\n                }\n                $('#EditModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n"],"sourceRoot":""}