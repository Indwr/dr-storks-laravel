{"version":3,"sources":["webpack:///./resources/assets/js/accounts/accounts.js"],"names":["$","select2","tableName","DataTable","processing","serverSide","ajax","url","accountUrl","data","account_status","find","val","account_type","columnDefs","targets","defaultContent","columns","row","id","name","checked","status","prepareTemplateRender","change","reload","document","on","event","accountId","currentTarget","updateStatus","window","method","cache","success","result","preventDefault","loadingButton","jQuery","this","button","accountCreateUrl","newRecord","editRecordWithForm","ajaxCallIsRunning","ajaxCallInProgress","renderData","deleteItem","type","description","prop","modal","ajaxCallCompleted","error","manageAjaxErrors"],"mappings":"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","file":"/assets/js/accounts/accounts.js","sourcesContent":["'use strict';\n\n$('#filter_status, #filter_type').select2();\n\nlet tableName = '#accountsTbl';\n$(tableName).DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'asc']],\n    ajax: {\n        url: accountUrl,\n        data: function (data) {\n            data.account_status = $('#filter_status').\n                find('option:selected').\n                val();\n            data.account_type = $('#filter_type').\n                find('option:selected').\n                val();\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [2, 3],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '6%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                let showLink = accountUrl + '/' + row.id;\n                return '<a href=\"' + showLink + '\">' + row.name +\n                    '</a>';\n            },\n            name: 'name',\n        },\n        {\n            data: 'type_label',\n            name: 'type',\n        },\n        {\n            data: function (row) {\n                let checked = row.status == 0 ? '' : 'checked';\n                let data = [{ 'id': row.id, 'checked': checked }];\n                return prepareTemplateRender('#accountIsActiveTemplate', data);\n            },\n            name: 'status',\n        },\n        {\n            data: function (row) {\n                let data = [{ 'id': row.id }];\n                return prepareTemplateRender('#accountActionTemplate', data);\n            }, name: 'id',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#filter_status, #filter_type').change(function () {\n            $(tableName).DataTable().ajax.reload(null, true);\n        });\n    },\n});\n\n$(document).on('change', '.is-active', function (event) {\n    let accountId = $(event.currentTarget).data('id');\n    updateStatus(accountId);\n});\n\nwindow.updateStatus = function (id) {\n    $.ajax({\n        url: accountUrl + '/' +  + id + '/active-deactive',\n        method: 'post',\n        cache: false,\n        success: function (result) {\n            if (result.success) {\n                $(tableName).DataTable().ajax.reload(null, false);\n            }\n        },\n    });\n};\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    let data = {\n        'formSelector': $(this),\n        'url': accountCreateUrl,\n        'type': 'POST',\n        'tableSelector': tableName,\n    };\n    newRecord(data, loadingButton);\n});\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#accountId').val();\n    let url = accountUrl + '/' +  + id;\n    let data = {\n        'formSelector': $(this),\n        'url': url,\n        'type': 'PUT',\n        'tableSelector': tableName,\n    };\n    editRecordWithForm(data, loadingButton);\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let accountId = $(event.currentTarget).data('id');\n    renderData(accountId);\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let id = $(event.currentTarget).data('id');\n    deleteItem(accountUrl + '/' +  + id, tableName, 'Account');\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: accountUrl + '/' +  + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#accountId').val(result.data.id);\n                $('#editName').val(result.data.name);\n                $('#editDescription').val(result.data.description);\n                if (result.data.status) {\n                    $('#editIsActive').val(1).prop('checked', true);\n                }\n                if (result.data.type == 1) {\n                    $('#editDebit').prop('checked', true);\n                } else {\n                    $('#editCredit').prop('checked', true);\n                }\n                $('#EditModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n"],"sourceRoot":""}