{"version":3,"sources":["webpack:///./resources/assets/js/issued_items/issued_items.js"],"names":["$","select2","tbl","DataTable","processing","serverSide","ajax","url","issuedItemUrl","data","status","find","val","columnDefs","targets","defaultContent","columns","row","id","item","name","render","moment","issued_date","utc","format","return_date","statusText","statusBadge","prepareTemplateRender","change","reload","document","on","event","issuedItemId","currentTarget","deleteItem","this","swal","title","text","type","showCancelButton","closeOnConfirm","showLoaderOnConfirm","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","returnIssuedItemUrl","dataType","success","message","timer"],"mappings":"mBAEAA,EAAE,kBAAkBC,UAEpB,IAAIC,EAAMF,EAAE,qBAAqBG,UAAU,CACvCC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,SACdC,KAAM,CACFC,IAAKC,cACLC,KAAM,SAAUA,GACZA,EAAKC,OAASV,EAAE,kBACZW,KAAK,mBACLC,QAGZC,WAAY,CACR,CACI,QAAW,CAAC,EAAG,GACf,WAAa,EACb,UAAa,cACb,MAAS,OAEb,CACI,QAAW,CAAC,GACZ,UAAa,cAEjB,CACIC,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIP,KAAM,SAAUQ,GAEZ,MAAO,aADQT,cAAgB,IAAMS,EAAIC,IACT,KAAOD,EAAIE,KAAKC,KAC5C,QAERA,KAAM,aAEV,CACIX,KAAM,yBACNW,KAAM,0BAEV,CACIX,KAAM,SAAUQ,GACZ,OAAOA,GAEXI,OAAQ,SAAUJ,GACd,OAAOK,OAAOL,EAAIM,aAAaC,MAAMC,OAAO,cAEhDL,KAAM,eAEV,CACIX,KAAM,SAAUQ,GACZ,OAAOA,GAEXI,OAAQ,SAAUJ,GACd,OAAwB,OAApBA,EAAIS,YACG,MAGJJ,OAAOL,EAAIS,aAAaF,MAAMC,OAAO,cAEhDL,KAAM,eAEV,CACIX,KAAM,WACNW,KAAM,YAEV,CACIX,KAAM,SAAUQ,GACZ,IAAIU,EAA4B,GAAdV,EAAIP,OAAe,cAAgB,WACjDkB,EAA6B,GAAdX,EAAIP,OAAe,OAAS,UAC3CD,EAAO,CACP,CACI,GAAMQ,EAAIC,GACV,OAAUD,EAAIP,OACd,WAAciB,EACd,YAAeC,IAEvB,OAAOC,sBAAsB,4BAA6BpB,IAE9DW,KAAM,UAEV,CACIX,KAAM,SAAUQ,GACZ,IAAIV,EAAMC,cAAgB,IAAMS,EAAIC,GAChCT,EAAO,CACP,CACI,GAAMQ,EAAIC,GACV,IAAOX,EAAM,UAErB,OAAOsB,sBAAsB,4BAA6BpB,IAC3DW,KAAM,OAGjB,eAAkB,WACdpB,EAAE,kBAAkB8B,QAAO,WACvB9B,EAAE,qBAAqBG,YAAYG,KAAKyB,OAAO,MAAM,SAKjE/B,EAAEgC,UAAUC,GAAG,QAAS,eAAe,SAAUC,GAC7C,IAAIC,EAAenC,EAAEkC,EAAME,eAAe3B,KAAK,MAC/C4B,WAAW7B,cAAgB,IAAM2B,EAAc,oBAC3C,kBAGRnC,EAAEgC,UAAUC,GAAG,QAAS,uBAAuB,SAAUC,GACrD,IAAIC,EAAenC,EAAEsC,MAAM7B,KAAK,MACPT,EAAEsC,MAAM7B,KAAK,WAElC8B,KAAK,CACGC,MAAO,gBACPC,KAAM,0CACNC,KAAM,UACNC,kBAAkB,EAClBC,gBAAgB,EAChBC,qBAAqB,EACrBC,mBAAoB,UACpBC,kBAAmB,OACnBC,iBAAkB,KAClBC,kBAAmB,QAEvB,WACIjD,EAAEM,KAAK,CACHC,IAAK2C,oBACLR,KAAM,MACNS,SAAU,OACV1C,KAAM,CAAES,GAAIiB,GACZiB,QAAS,SAAU3C,GACf8B,KAAK,CACDC,MAAO,iBACPC,KAAMhC,EAAK4C,QACXX,KAAM,UACNY,MAAO,MAEXpD,EAAII,KAAKyB,OAAO,MAAM,a","file":"/assets/js/issued_items/issued_items.js","sourcesContent":["'use strict';\n\n$('#filter_status').select2();\n\nlet tbl = $('#issuedItemsTable').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[2, 'desc']],\n    ajax: {\n        url: issuedItemUrl,\n        data: function (data) {\n            data.status = $('#filter_status').\n                find('option:selected').\n                val();\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [5, 6],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '10%',\n        },\n        {\n            'targets': [4],\n            'className': 'text-right',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                let showLink = issuedItemUrl + '/' + row.id;\n                return '<a href=\"' + showLink + '\">' + row.item.name +\n                    '</a>';\n            },\n            name: 'item.name',\n        },\n        {\n            data: 'item.itemcategory.name',\n            name: 'item.itemcategory.name',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                return moment(row.issued_date).utc().format('Do MMM, Y');\n            },\n            name: 'issued_date',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                if (row.return_date === null) {\n                    return 'N/A';\n                }\n\n                return moment(row.return_date).utc().format('Do MMM, Y');\n            },\n            name: 'return_date',\n        },\n        {\n            data: 'quantity',\n            name: 'quantity',\n        },\n        {\n            data: function (row) {\n                let statusText = (row.status == 0) ? 'Return Item' : 'Returned';\n                let statusBadge = (row.status == 0) ? 'info' : 'primary';\n                let data = [\n                    {\n                        'id': row.id,\n                        'status': row.status,\n                        'statusText': statusText,\n                        'statusBadge': statusBadge,\n                    }];\n                return prepareTemplateRender('#issuedItemStatusTemplate', data);\n            },\n            name: 'status',\n        },\n        {\n            data: function (row) {\n                let url = issuedItemUrl + '/' + row.id;\n                let data = [\n                    {\n                        'id': row.id,\n                        'url': url + '/edit',\n                    }];\n                return prepareTemplateRender('#issuedItemActionTemplate', data);\n            }, name: 'id',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#filter_status').change(function () {\n            $('#issuedItemsTable').DataTable().ajax.reload(null, true);\n        });\n    },\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let issuedItemId = $(event.currentTarget).data('id');\n    deleteItem(issuedItemUrl + '/' + issuedItemId, '#issuedItemsTable',\n        'Issued Item');\n});\n\n$(document).on('click', '.changes-status-btn', function (event) {\n    let issuedItemId = $(this).data('id');\n    const issuedItemStatus = $(this).data('status');\n    if (!issuedItemStatus) {\n        swal({\n                title: 'Return Item !',\n                text: 'Are you sure want to return this item ?',\n                type: 'warning',\n                showCancelButton: true,\n                closeOnConfirm: false,\n                showLoaderOnConfirm: true,\n                confirmButtonColor: '#5cb85c',\n                cancelButtonColor: '#d33',\n                cancelButtonText: 'No',\n                confirmButtonText: 'Yes',\n            },\n            function () {\n                $.ajax({\n                    url: returnIssuedItemUrl,\n                    type: 'get',\n                    dataType: 'json',\n                    data: { id: issuedItemId },\n                    success: function (data) {\n                        swal({\n                            title: 'Item Returned!',\n                            text: data.message,\n                            type: 'success',\n                            timer: 2000,\n                        });\n                        tbl.ajax.reload(null, true);\n                    },\n                });\n            });\n    }\n});\n"],"sourceRoot":""}