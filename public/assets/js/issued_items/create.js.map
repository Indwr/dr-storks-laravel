{"version":3,"sources":["webpack:///./resources/assets/js/issued_items/create.js"],"names":["$","document","ready","select2","width","datetimepicker","DatetimepickerDefaults","format","useCurrent","sideBySide","on","e","minDate","moment","val","add","data","setTimeout","trigger","this","ajax","url","itemsUrl","type","dataType","id","success","length","empty","removeAttr","each","i","v","append","attr","text","prop","usersUrl","itemAvailableQtyUrl","availableQuantity","parseInt","quantity","showError","window","message","toast","heading","showHideTransition","icon","position"],"mappings":"mBAEAA,EAAEC,UAAUC,OAAM,WACdF,EAAE,8CAA8CG,QAAQ,CACpDC,MAAO,SAGXJ,EAAE,cAAcK,eAAeC,uBAAuB,CAClDC,OAAQ,aACRC,YAAY,EACZC,YAAY,KAGhBT,EAAE,eAAeK,eAAeC,uBAAuB,CACnDC,OAAQ,aACRC,YAAY,EACZC,YAAY,KAGhBT,EAAE,cAAcU,GAAG,aAAa,SAAUC,GACtC,IAAIC,EAAUC,OAAOb,EAAE,cAAcc,OAAOC,IAAI,EAAG,QACnDf,EAAE,eAAegB,KAAK,kBAAkBJ,QAAQA,MAGpDK,YAAW,WACPjB,EAAE,4BAA4BkB,QAAQ,YACvC,QAGPlB,EAAE,iBAAiBU,GAAG,UAAU,WACN,KAAlBV,EAAEmB,MAAML,OACRd,EAAEoB,KAAK,CACHC,IAAKC,SACLC,KAAM,MACNC,SAAU,OACVR,KAAM,CAAES,GAAIzB,EAAEmB,MAAML,OACpBY,QAAS,SAAUV,GACU,IAArBA,EAAKA,KAAKW,QACV3B,EAAE,UAAU4B,QACZ5B,EAAE,UAAU6B,WAAW,YACvB7B,EAAE8B,KAAKd,EAAKA,MAAM,SAAUe,EAAGC,GAC3BhC,EAAE,UACEiC,OAAOjC,EAAE,qBACLkC,KAAK,QAASH,GACdI,KAAKH,OAEjBhC,EAAE,UAAUkB,QAAQ,YAEpBlB,EAAE,UAAUoC,KAAK,YAAY,GAC7BpC,EAAE,aAAaoC,KAAK,YAAY,GAChCpC,EAAE,aAAac,IAAI,IACnBd,EAAE,0BAA0BmC,KAAK,KACjCnC,EAAE,sBAAsBc,IAAI,OAK5Cd,EAAE,UAAU4B,QACZ5B,EAAE,UAAUoC,KAAK,YAAY,MAGjCpC,EAAE,aAAaU,GAAG,UAAU,WACF,KAAlBV,EAAEmB,MAAML,OACRd,EAAEoB,KAAK,CACHC,IAAKgB,SACLd,KAAM,MACNC,SAAU,OACVR,KAAM,CAAES,GAAIzB,EAAEmB,MAAML,OACpBY,QAAS,SAAUV,GACU,IAArBA,EAAKA,KAAKW,QACV3B,EAAE,YAAY4B,QACd5B,EAAE,YAAY6B,WAAW,YACzB7B,EAAE8B,KAAKd,EAAKA,MAAM,SAAUe,EAAGC,GAC3BhC,EAAE,YACEiC,OAAOjC,EAAE,qBACLkC,KAAK,QAASH,GACdI,KAAKH,QAGjBhC,EAAE,YAAYoC,KAAK,YAAY,MAI/CpC,EAAE,YAAY4B,QACd5B,EAAE,YAAYoC,KAAK,YAAY,MAGnCpC,EAAE,UAAUU,GAAG,UAAU,WACrBV,EAAEoB,KAAK,CACHC,IAAKiB,oBACLf,KAAM,MACNC,SAAU,OACVR,KAAM,CAAES,GAAIzB,EAAEmB,MAAML,OACpBY,QAAS,SAAUV,GACfhB,EAAE,sBAAsBc,IAAIE,GAC5BhB,EAAE,0BAA0BmC,KAAKnB,GACjChB,EAAE,aAAakC,KAAK,MAAOlB,GAC3BhB,EAAE,aAAakC,KAAK,YAAY,SAK5ClC,EAAE,aAAaU,GAAG,UAAU,WACxB,IAAI6B,EAAoBC,SAASxC,EAAE,sBAAsBc,OACrD2B,EAAWD,SAASxC,EAAEmB,MAAML,OAC5B2B,GAAYF,EACZvC,EAAE,YAAYoC,KAAK,YAAY,GACX,IAAbK,EACPC,UAAU,4BAEVA,UAAU,qDAGlBC,OAAOD,UAAY,SAAUE,GACzB5C,EAAE6C,MAAM,CACJC,QAAS,QACTX,KAAMS,EACNG,mBAAoB,OACpBC,KAAM,QACNC,SAAU,cAEdjD,EAAE,YAAYoC,KAAK,YAAY,IAGnCpC,EAAEC,UACES,GAAG,SAAU,8CAA8C,WACvDV,EAAE,YAAYkC,KAAK,YAAY,O","file":"/assets/js/issued_items/create.js","sourcesContent":["'use strict';\n\n$(document).ready(function () {\n    $('#itemCategory, #items, #userType, #issueTo').select2({\n        width: '100%',\n    });\n\n    $('#issueDate').datetimepicker(DatetimepickerDefaults({\n        format: 'YYYY-MM-DD',\n        useCurrent: true,\n        sideBySide: true,\n    }));\n\n    $('#returnDate').datetimepicker(DatetimepickerDefaults({\n        format: 'YYYY-MM-DD',\n        useCurrent: false,\n        sideBySide: true,\n    }));\n\n    $('#issueDate').on('dp.change', function (e) {\n        let minDate = moment($('#issueDate').val()).add(1, 'days');\n        $('#returnDate').data('DateTimePicker').minDate(minDate);\n    });\n\n    setTimeout(function () {\n        $('#itemCategory, #userType').trigger('change');\n    }, 300);\n});\n\n$('#itemCategory').on('change', function () {\n    if ($(this).val() !== '') {\n        $.ajax({\n            url: itemsUrl,\n            type: 'get',\n            dataType: 'json',\n            data: { id: $(this).val() },\n            success: function (data) {\n                if (data.data.length !== 0) {\n                    $('#items').empty();\n                    $('#items').removeAttr('disabled');\n                    $.each(data.data, function (i, v) {\n                        $('#items').\n                            append($('<option></option>').\n                                attr('value', i).\n                                text(v));\n                    });\n                    $('#items').trigger('change');\n                } else {\n                    $('#items').prop('disabled', true);\n                    $('#quantity').prop('disabled', true);\n                    $('#quantity').val('');\n                    $('#showAvailableQuantity').text('0');\n                    $('#availableQuantity').val(0);\n                }\n            },\n        });\n    }\n    $('#items').empty();\n    $('#items').prop('disabled', true);\n});\n\n$('#userType').on('change', function () {\n    if ($(this).val() !== '') {\n        $.ajax({\n            url: usersUrl,\n            type: 'get',\n            dataType: 'json',\n            data: { id: $(this).val() },\n            success: function (data) {\n                if (data.data.length !== 0) {\n                    $('#issueTo').empty();\n                    $('#issueTo').removeAttr('disabled');\n                    $.each(data.data, function (i, v) {\n                        $('#issueTo').\n                            append($('<option></option>').\n                                attr('value', i).\n                                text(v));\n                    });\n                } else\n                    $('#issueTo').prop('disabled', true);\n            },\n        });\n    }\n    $('#issueTo').empty();\n    $('#issueTo').prop('disabled', true);\n});\n\n$('#items').on('change', function () {\n    $.ajax({\n        url: itemAvailableQtyUrl,\n        type: 'get',\n        dataType: 'json',\n        data: { id: $(this).val() },\n        success: function (data) {\n            $('#availableQuantity').val(data);\n            $('#showAvailableQuantity').text(data);\n            $('#quantity').attr('max', data);\n            $('#quantity').attr('disabled', false);\n        },\n    });\n});\n\n$('#quantity').on('change', function () {\n    let availableQuantity = parseInt($('#availableQuantity').val());\n    let quantity = parseInt($(this).val());\n    if (quantity <= availableQuantity) {\n        $('#btnSave').prop('disabled', false);\n    } else if (quantity === 0)\n        showError('Quantity cannot be zero.');\n    else\n        showError('Quantity must be less than Available quantity.');\n});\n\nwindow.showError = function (message) {\n    $.toast({\n        heading: 'Error',\n        text: message,\n        showHideTransition: 'fade',\n        icon: 'error',\n        position: 'top-right',\n    });\n    $('#btnSave').prop('disabled', true);\n};\n\n$(document).\n    on('submit', '#createIssuedItemForm, #editIssuedItemForm', function () {\n        $('#btnSave').attr('disabled', true);\n    });\n"],"sourceRoot":""}