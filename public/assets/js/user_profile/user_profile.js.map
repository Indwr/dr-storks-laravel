{"version":3,"sources":["webpack:///./resources/assets/js/user_profile/user_profile.js"],"names":["$","document","on","event","preventDefault","loadingButton","jQuery","this","find","button","ajax","url","profileUpdateUrl","type","data","FormData","processData","contentType","success","result","modal","location","reload","error","manageAjaxErrors","complete","updateLanguageURL","currentPassword","val","trim","password","confirmPassword","show","html","validatePassword","changePasswordUrl","displaySuccessMessage","message","resetModalForm","currentTarget","renderProfileData","ext","split","pop","toLowerCase","inArray","displayPhoto","window","profileUrl","user","id","first_name","last_name","email","phone","attr","image_url","input","selector","displayPreview","files","reader","FileReader","onload","e","image","Image","src","target","readAsDataURL","inputField","parent","siblings","children","addClass","removeClass","userCurrentLanguage","trigger","select2","width"],"mappings":"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","file":"/assets/js/user_profile/user_profile.js","sourcesContent":["'use strict';\n\n$(document).on('submit', '#editProfileForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnPrEditSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: profileUpdateUrl,\n        type: 'post',\n        data: new FormData($(this)[0]),\n        processData: false,\n        contentType: false,\n        success: function (result) {\n            $('#editProfileModal').modal('hide');\n            location.reload();\n        },\n        error: function (result) {\n            manageAjaxErrors(result, 'editProfileValidationErrorsBox');\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$(document).on('submit', '#changeLanguageForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnLanguageChange');\n    loadingButton.button('loading');\n    $.ajax({\n        url: updateLanguageURL,\n        type: 'post',\n        data: new FormData($(this)[0]),\n        processData: false,\n        contentType: false,\n        success: function (result) {\n            location.reload();\n        },\n        error: function (result) {\n            manageAjaxErrors(result, 'editProfileValidationErrorsBox');\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$(document).on('submit', '#changePasswordForm', function (event) {\n    event.preventDefault();\n    let isValidate = validatePassword();\n    if (!isValidate) {\n        return false;\n    }\n    let loadingButton = jQuery(this).find('#btnPrPasswordEditSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: changePasswordUrl,\n        type: 'post',\n        data: new FormData($(this)[0]),\n        processData: false,\n        contentType: false,\n        success: function (result) {\n            if (result.success) {\n                $('#changePasswordModal').modal('hide');\n                displaySuccessMessage(result.message);\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$('#editProfileModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editProfileForm', '#editProfileValidationErrorsBox');\n});\n\n// open edit user profile model\n$(document).on('click', '.editProfile', function (event) {\n    let userId = $(event.currentTarget).data('id');\n    renderProfileData();\n});\n$(document).on('change', '#profileImage', function () {\n    let ext = $(this).val().split('.').pop().toLowerCase();\n    if ($.inArray(ext, ['gif', 'png', 'jpg', 'jpeg']) == -1) {\n        $(this).val('');\n        $('#editProfileValidationErrorsBox').\n            html('The profile image must be a file of type: jpeg, jpg, png.').\n            show();\n    } else {\n        displayPhoto(this, '#editPhoto');\n    }\n});\n\nwindow.renderProfileData = function () {\n    $.ajax({\n        url: profileUrl,\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let user = result.data;\n                $('#editUserId').val(user.id);\n                $('#firstName').val(user.first_name);\n                $('#lastName').val(user.last_name);\n                $('#email').val(user.email);\n                $('#phone').val(user.phone);\n                $('#editPhoto').attr('src', user.image_url);\n                $('#editProfileModal').modal('show');\n            }\n        },\n    });\n};\nwindow.displayPhoto = function (input, selector) {\n    let displayPreview = true;\n    if (input.files && input.files[0]) {\n        let reader = new FileReader();\n        reader.onload = function (e) {\n            let image = new Image();\n            image.src = e.target.result;\n            image.onload = function () {\n                $(selector).attr('src', e.target.result);\n                displayPreview = true;\n            };\n        };\n        if (displayPreview) {\n            reader.readAsDataURL(input.files[0]);\n            $(selector).show();\n        }\n    }\n};\n\n$(document).on('click', '.changeType', function (e) {\n    let inputField = $(this).parent().siblings();\n    let oldType = inputField.attr('type');\n    if (oldType == 'password') {\n        $(this).children().addClass('icon-eye');\n        $(this).children().removeClass('icon-ban');\n        inputField.attr('type', 'text');\n    } else {\n        $(this).children().removeClass('icon-eye');\n        $(this).children().addClass('icon-ban');\n        inputField.attr('type', 'password');\n    }\n});\n\n$('#changePasswordModal').on('hidden.bs.modal', function () {\n    resetModalForm('#changePasswordForm', '#editPasswordValidationErrorsBox');\n});\n\n$('#changeLanguageModal').on('hidden.bs.modal', function () {\n    $('#language').val(userCurrentLanguage).trigger('change.select2');\n});\n\nfunction validatePassword () {\n    let currentPassword = $('#pfCurrentPassword').val().trim();\n    let password = $('#pfNewPassword').val().trim();\n    let confirmPassword = $('#pfNewConfirmPassword').val().trim();\n\n    if (currentPassword == '' || password == '' || confirmPassword == '') {\n        $('#editPasswordValidationErrorsBox').\n            show().\n            html('Please fill all the required fields.');\n        return false;\n    }\n    return true;\n}\n\n$('#language').select2({\n    width: '100%'\n});\n"],"sourceRoot":""}