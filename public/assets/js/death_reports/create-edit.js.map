{"version":3,"sources":["webpack:///./resources/assets/js/death_reports/create-edit.js"],"names":["$","document","ready","select2","width","datetimepicker","DatetimepickerDefaults","format","useCurrent","sideBySide","maxDate","Date","on","focus","event","preventDefault","loadingButton","jQuery","this","find","button","ajax","url","deathReportCreateUrl","type","data","serialize","success","result","displaySuccessMessage","message","modal","DataTable","reload","error","printErrorMessage","complete","ajaxCallIsRunning","ajaxCallInProgress","deathReportId","currentTarget","renderData","window","id","deathReportUrl","val","case_id","trigger","doctor_id","description","date","ajaxCallCompleted","manageAjaxErrors","UnprocessableInputError","resetModalForm"],"mappings":"AAAAA,EAAEC,UAAUC,OAAM,WACd,aAEAF,EAAE,kDAAkDG,QAAQ,CACxDC,MAAO,SAEXJ,EAAE,oBAAoBK,eAAeC,uBAAuB,CACxDC,OAAQ,sBACRC,YAAY,EACZC,YAAY,EACZC,QAAS,IAAIC,QAEjBX,EAAE,yBAAyBY,GAAG,kBAAkB,WAC5CZ,EAAE,8BAA8Ba,cAIxCb,EAAEC,UAAUW,GAAG,SAAU,eAAe,SAAUE,GAC9CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,YACtCH,EAAcI,OAAO,WACrBpB,EAAEqB,KAAK,CACHC,IAAKC,qBACLC,KAAM,OACNC,KAAMzB,EAAEkB,MAAMQ,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7B9B,EAAE,aAAa+B,MAAM,QACrB/B,EAAE,oBAAoBgC,YAAYX,KAAKY,OAAO,MAAM,KAG5DC,MAAO,SAAUN,GACbO,kBAAkB,uBAAwBP,IAE9CQ,SAAU,WACNpB,EAAcI,OAAO,eAKjCpB,EAAEC,UAAUW,GAAG,QAAS,aAAa,SAAUE,GAC3C,IAAIuB,kBAAJ,CAGAC,qBACA,IAAIC,EAAgBvC,EAAEc,EAAM0B,eAAef,KAAK,MAChDgB,WAAWF,OAGfG,OAAOD,WAAa,SAAUE,GAC1B3C,EAAEqB,KAAK,CACHC,IAAKsB,eAAiB,IAAMD,EAAK,QACjCnB,KAAM,MACNG,QAAS,SAAUC,GACXA,EAAOD,UACP3B,EAAE,kBAAkB6C,IAAIjB,EAAOH,KAAKkB,IACpC3C,EAAE,eACE6C,IAAIjB,EAAOH,KAAKqB,SAChBC,QAAQ,kBACZ/C,EAAE,iBACE6C,IAAIjB,EAAOH,KAAKuB,WAChBD,QAAQ,kBACZ/C,EAAE,oBAAoB6C,IAAIjB,EAAOH,KAAKwB,aACtCjD,EAAE,aACE6C,IAAItC,OAAOqB,EAAOH,KAAKyB,KAAM,wBACjClD,EAAE,cAAc+B,MAAM,QACtBoB,sBAGRjB,MAAO,SAAUN,GACbwB,iBAAiBxB,OAK7B5B,EAAEC,UAAUW,GAAG,SAAU,aAAa,SAAUE,GAC5CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,gBACtCH,EAAcI,OAAO,WACrB,IAAIuB,EAAK3C,EAAE,kBAAkB6C,MAC7B7C,EAAEqB,KAAK,CACHC,IAAKsB,eAAiB,IAAMD,EAC5BnB,KAAM,QACNC,KAAMzB,EAAEkB,MAAMQ,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7B9B,EAAE,cAAc+B,MAAM,QACtB/B,EAAE,oBAAoBgC,YAAYX,KAAKY,OAAO,MAAM,KAG5DC,MAAO,SAAUN,GACbyB,wBAAwBzB,IAE5BQ,SAAU,WACNpB,EAAcI,OAAO,eAKjCpB,EAAE,aAAaY,GAAG,mBAAmB,WACjC0C,eAAe,cAAe,wBAC9BtD,EAAE,sBAAsB6C,IAAI,IAAIE,QAAQ,qBAG5C/C,EAAE,cAAcY,GAAG,mBAAmB,WAClC0C,eAAe,YAAa","file":"/assets/js/death_reports/create-edit.js","sourcesContent":["$(document).ready(function () {\n    'use strict';\n\n    $('#caseId, #doctorId, #editCaseId, #editDoctorId').select2({\n        width: '100%',\n    });\n    $('#date, #editDate').datetimepicker(DatetimepickerDefaults({\n        format: 'YYYY-MM-DD HH:mm:ss',\n        useCurrent: true,\n        sideBySide: true,\n        maxDate: new Date(),\n    }));\n    $('#addModal, #editModal').on('shown.bs.modal', function () {\n        $('#caseId, #editCaseId:first').focus();\n    });\n});\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: deathReportCreateUrl,\n        type: 'POST',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addModal').modal('hide');\n                $('#deathReportsTbl').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            printErrorMessage('#validationErrorsBox', result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let deathReportId = $(event.currentTarget).data('id');\n    renderData(deathReportId);\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: deathReportUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#deathReportId').val(result.data.id);\n                $('#editCaseId').\n                    val(result.data.case_id).\n                    trigger('change.select2');\n                $('#editDoctorId').\n                    val(result.data.doctor_id).\n                    trigger('change.select2');\n                $('#editDescription').val(result.data.description);\n                $('#editDate').\n                    val(format(result.data.date, 'YYYY-MM-DD HH:mm:ss'));\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#deathReportId').val();\n    $.ajax({\n        url: deathReportUrl + '/' + id,\n        type: 'patch',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                $('#deathReportsTbl').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            UnprocessableInputError(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$('#addModal').on('hidden.bs.modal', function () {\n    resetModalForm('#addNewForm', '#validationErrorsBox');\n    $('#caseId, #doctorId').val('').trigger('change.select2');\n});\n\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editValidationErrorsBox');\n});\n"],"sourceRoot":""}