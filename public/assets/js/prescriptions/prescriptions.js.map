{"version":3,"sources":["webpack:///./resources/assets/js/prescriptions/prescriptions.js"],"names":["tbl","$","DataTable","processing","serverSide","ajax","url","prescriptionUrl","data","status","find","val","columnDefs","targets","defaultContent","columns","name","row","isEmpty","medical_history","current_medication","health_insurance","low_income","reference","checked","id","prepareTemplateRender","showUrl","change","reload","document","on","event","prescriptionId","currentTarget","deleteItem","updateStatus","window","method","cache","success","result"],"mappings":"mBAEA,IACIA,EAAMC,EAAE,uBAAuBC,UAAU,CACzCC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,QACdC,KAAM,CACFC,IAAKC,gBACLC,KAAM,SAAUA,GACZA,EAAKC,OAASR,EAAE,kBACZS,KAAK,mBACLC,QAGZC,WAAY,CACR,CACI,QAAW,CAAC,EAAG,GACf,WAAa,EACb,UAAa,eAEjB,CACI,QAAW,CAAC,GACZ,MAAS,MAEb,CACIC,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIP,KAAM,yBACNQ,KAAM,2BAEV,CACIR,KAAM,wBACNQ,KAAM,0BAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAIE,iBACb,MACAF,EAAIE,iBAEdH,KAAM,mBAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAIG,oBACb,MACAH,EAAIG,oBAEdJ,KAAM,sBAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAII,kBACb,MACAJ,EAAII,kBAEdL,KAAM,oBAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAIK,YAAc,MAAQL,EAAIK,YAEjDN,KAAM,cAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAIM,WAAa,MAAQN,EAAIM,WAEhDP,KAAM,aAEV,CACIR,KAAM,SAAUS,GACZ,IAAIO,EAAwB,GAAdP,EAAIR,OAAc,GAAK,UACjCD,EAAO,CAAC,CAAE,GAAMS,EAAIQ,GAAI,QAAWD,IACvC,OAAOE,sBAAsB,8BACzBlB,IAERQ,KAAM,UAEV,CACIR,KAAM,SAAUS,GACZ,IAAIX,EAAMC,gBAAkB,IAAMU,EAAIQ,GAClCE,EAAUpB,gBAAkB,IAAMU,EAAIQ,GACtCjB,EAAO,CACP,CACI,GAAMS,EAAIQ,GACV,IAAOnB,EAAM,QACb,QAAWqB,IAEnB,OAAOD,sBAAsB,8BACzBlB,IACLQ,KAAM,2BAGjB,eAAkB,WACdf,EAAE,kBAAkB2B,QAAO,WACvB3B,EAnGI,uBAmGSC,YAAYG,KAAKwB,OAAO,MAAM,SAKvD5B,EAAE6B,UAAUC,GAAG,QAAS,eAAe,SAAUC,GAC7C,IAAIC,EAAiBhC,EAAE+B,EAAME,eAAe1B,KAAK,MACjD2B,WAAW5B,gBAAkB,IAAM0B,EAAgB,sBAC/C,mBAGRhC,EAAE6B,UAAUC,GAAG,SAAU,WAAW,SAAUC,GAC1C,IAAIC,EAAiBhC,EAAE+B,EAAME,eAAe1B,KAAK,MACjD4B,aAAaH,MAGjBI,OAAOD,aAAe,SAAUX,GAC5BxB,EAAEI,KAAK,CACHC,IAAKC,gBAAkB,MAAOkB,EAAK,mBACnCa,OAAQ,OACRC,OAAO,EACPC,QAAS,SAAUC,GACXA,EAAOD,SACPxC,EAAIK,KAAKwB,OAAO,MAAM,Q","file":"/assets/js/prescriptions/prescriptions.js","sourcesContent":["'use strict';\n\nlet tableName = '#prescriptionsTable';\nlet tbl = $('#prescriptionsTable').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'asc']],\n    ajax: {\n        url: prescriptionUrl,\n        data: function (data) {\n            data.status = $('#filter_status').\n                find('option:selected').\n                val();\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [7, 8],\n            'orderable': false,\n            'className': 'text-center',\n        },\n        {\n            'targets': [8],\n            'width': '8%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: 'patient.user.full_name',\n            name: 'patient.user.first_name',\n        },\n        {\n            data: 'doctor.user.full_name',\n            name: 'doctor.user.first_name',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.medical_history)\n                    ? 'N/A'\n                    : row.medical_history;\n            },\n            name: 'medical_history',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.current_medication)\n                    ? 'N/A'\n                    : row.current_medication;\n            },\n            name: 'current_medication',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.health_insurance)\n                    ? 'N/A'\n                    : row.health_insurance;\n            },\n            name: 'health_insurance',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.low_income) ? 'N/A' : row.low_income;\n            },\n            name: 'low_income',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.reference) ? 'N/A' : row.reference;\n            },\n            name: 'reference',\n        },\n        {\n            data: function (row) {\n                let checked = row.status == 0 ? '' : 'checked';\n                let data = [{ 'id': row.id, 'checked': checked }];\n                return prepareTemplateRender('#prescriptionStatusTemplate',\n                    data);\n            },\n            name: 'status',\n        },\n        {\n            data: function (row) {\n                let url = prescriptionUrl + '/' + row.id;\n                let showUrl = prescriptionUrl + '/' + row.id;\n                let data = [\n                    {\n                        'id': row.id,\n                        'url': url + '/edit',\n                        'showUrl': showUrl,\n                    }];\n                return prepareTemplateRender('#prescriptionActionTemplate',\n                    data);\n            }, name: 'patient.user.last_name',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#filter_status').change(function () {\n            $(tableName).DataTable().ajax.reload(null, true);\n        });\n    },\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let prescriptionId = $(event.currentTarget).data('id');\n    deleteItem(prescriptionUrl + '/' + prescriptionId, '#prescriptionsTable',\n        'Prescription');\n});\n\n$(document).on('change', '.status', function (event) {\n    let prescriptionId = $(event.currentTarget).data('id');\n    updateStatus(prescriptionId);\n});\n\nwindow.updateStatus = function (id) {\n    $.ajax({\n        url: prescriptionUrl + '/' + +id + '/active-deactive',\n        method: 'post',\n        cache: false,\n        success: function (result) {\n            if (result.success) {\n                tbl.ajax.reload(null, false);\n            }\n        },\n    });\n};\n"],"sourceRoot":""}