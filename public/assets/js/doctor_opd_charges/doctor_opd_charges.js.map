{"version":3,"sources":["webpack:///./resources/assets/js/doctor_opd_charges/doctor_opd_charges.js"],"names":["$","document","ready","on","focus","select2","width","tableName","tbl","DataTable","processing","serverSide","ajax","url","doctorOPDChargeUrl","columnDefs","targets","defaultContent","columns","data","name","row","isEmpty","standard_charge","getCurrentCurrencyClass","addCommas","id","prepareTemplateRender","event","preventDefault","loadingButton","jQuery","this","find","button","doctorOPDChargeCreateUrl","type","serialize","success","result","displaySuccessMessage","message","modal","reload","error","printErrorMessage","complete","currentTarget","deleteItem","doctorOPDChargeId","renderData","window","val","doctor_id","trigger","manageAjaxErrors","UnprocessableInputError","resetModalForm"],"mappings":"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","file":"/assets/js/doctor_opd_charges/doctor_opd_charges.js","sourcesContent":["$(document).ready(function () {\n    'use strict';\n\n    $('#addModal, #editModal').on('shown.bs.modal', function () {\n        $('#doctorId, #editDoctorId:first').focus();\n    });\n\n    $('#doctorId, #editDoctorId').select2({\n        width: '100%',\n    });\n    let tableName = '#doctorOPDChargeTable';\n    let tbl = $(tableName).DataTable({\n        processing: true,\n        serverSide: true,\n        'order': [[0, 'desc']],\n        ajax: {\n            url: doctorOPDChargeUrl,\n        },\n        columnDefs: [\n            {\n                'targets': [2],\n                'orderable': false,\n                'className': 'text-center',\n                'width': '10%',\n            },\n            {\n                targets: '_all',\n                defaultContent: 'N/A',\n            },\n            {\n                'targets': [1],\n                'className': 'text-right',\n                'width': '15%',\n            },\n        ],\n        columns: [\n            {\n                data: 'doctor.user.full_name',\n                name: 'doctor.user.first_name',\n            },\n            {\n                data: function (row) {\n                    return !isEmpty(row.standard_charge)\n                        ? '<p class=\"cur-margin\">' +\n                        getCurrentCurrencyClass() + ' ' +\n                        addCommas(row.standard_charge) + '</p>'\n                        : 'N/A';\n                },\n                name: 'standard_charge',\n            },\n            {\n                data: function (row) {\n                    let data = [{ 'id': row.id }];\n                    return prepareTemplateRender('#doctorOPDChargeTemplate',\n                        data);\n                }, name: 'id',\n            },\n        ],\n    });\n\n    $(document).on('submit', '#addNewForm', function (event) {\n        event.preventDefault();\n        var loadingButton = jQuery(this).find('#btnSave');\n        loadingButton.button('loading');\n        $.ajax({\n            url: doctorOPDChargeCreateUrl,\n            type: 'POST',\n            data: $(this).serialize(),\n            success: function (result) {\n                if (result.success) {\n                    displaySuccessMessage(result.message);\n                    $('#addModal').modal('hide');\n                    tbl.ajax.reload(null, false);\n                }\n            },\n            error: function (result) {\n                printErrorMessage('#validationErrorsBox', result);\n            },\n            complete: function () {\n                loadingButton.button('reset');\n            },\n        });\n    });\n\n    $(document).on('click', '.delete-btn', function (event) {\n        let id = $(event.currentTarget).data('id');\n        deleteItem(doctorOPDChargeUrl + '/' + id, tableName,\n            'Doctor OPD Charge');\n    });\n\n    $(document).on('click', '.edit-btn', function (event) {\n        let doctorOPDChargeId = $(event.currentTarget).data('id');\n        renderData(doctorOPDChargeId);\n    });\n\n    window.renderData = function (id) {\n        $.ajax({\n            url: doctorOPDChargeUrl + '/' + id + '/edit',\n            type: 'GET',\n            success: function (result) {\n                if (result.success) {\n                    $('#doctorOPDChargeId').val(result.data.id);\n                    $('#editDoctorId').\n                        val(result.data.doctor_id).\n                        trigger('change.select2');\n                    $('#editStandardCharge').val(result.data.standard_charge);\n                    $('.price-input').trigger('input');\n                    $('#editModal').modal('show');\n                }\n            },\n            error: function (result) {\n                manageAjaxErrors(result);\n            },\n        });\n    };\n\n    $(document).on('submit', '#editForm', function (event) {\n        event.preventDefault();\n        var loadingButton = jQuery(this).find('#btnEditSave');\n        loadingButton.button('loading');\n        let id = $('#doctorOPDChargeId').val();\n        $.ajax({\n            url: doctorOPDChargeUrl + '/' + id,\n            type: 'patch',\n            data: $(this).serialize(),\n            success: function (result) {\n                if (result.success) {\n                    displaySuccessMessage(result.message);\n                    $('#editModal').modal('hide');\n                    $(tableName).DataTable().ajax.reload(null, false);\n                }\n            },\n            error: function (result) {\n                UnprocessableInputError(result);\n            },\n            complete: function () {\n                loadingButton.button('reset');\n            },\n        });\n    });\n\n    $('#addModal').on('hidden.bs.modal', function () {\n        resetModalForm('#addNewForm', '#validationErrorsBox');\n        $('#doctorId').val('').trigger('change.select2');\n    });\n\n    $('#editModal').on('hidden.bs.modal', function () {\n        resetModalForm('#editForm', '#editValidationErrorsBox');\n    });\n\n});\n"],"sourceRoot":""}