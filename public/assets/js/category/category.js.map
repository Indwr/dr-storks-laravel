{"version":3,"sources":["webpack:///./resources/assets/js/category/category.js"],"names":["tbl","$","DataTable","processing","serverSide","ajax","url","categoriesUrl","data","is_active","find","val","columnDefs","targets","defaultContent","columns","row","id","name","checked","prepareTemplateRender","change","reload","document","on","event","preventDefault","loadingButton","jQuery","this","button","categoryCreateUrl","type","serialize","success","result","displaySuccessMessage","message","modal","error","printErrorMessage","complete","UnprocessableInputError","resetModalForm","window","renderData","category","prop","ajaxCallCompleted","manageAjaxErrors","ajaxCallIsRunning","ajaxCallInProgress","categoryId","currentTarget","deleteItem","activeDeActiveCategory","method","cache"],"mappings":"mBAEA,IACIA,EAAMC,EAAE,oBAAoBC,UAAU,CACtCC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,QACdC,KAAM,CACFC,IAAKC,cACLC,KAAM,SAAUA,GACZA,EAAKC,UAAYR,EAAE,kBACfS,KAAK,mBACLC,QAGZC,WAAY,CACR,CACI,QAAW,CAAC,GACZ,WAAa,EACb,UAAa,cACb,MAAS,MAEb,CACI,QAAW,CAAC,GACZ,WAAa,EACb,UAAa,cACb,MAAS,MAEb,CACIC,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIP,KAAM,SAAUQ,GAEZ,MAAO,aADQT,cAAgB,IAAMS,EAAIC,IACT,KAAOD,EAAIE,KACvC,QAERA,KAAM,QAEV,CACIV,KAAM,SAAUQ,GACZ,IAAIG,EAA4B,IAAlBH,EAAIP,UAAkB,GAAK,UACrCD,EAAO,CAAC,CAAC,GAAMQ,EAAIC,GAAI,QAAYE,IACvC,OAAOC,sBAAsB,0BAA2BZ,IACzDU,KAAM,aAEb,CACIV,KAAM,SAAUQ,GACZ,IAAIR,EAAO,CAAC,CAAE,GAAMQ,EAAIC,KACxB,OAAOG,sBAAsB,0BAA2BZ,IACzDU,KAAM,OAGjB,eAAkB,WACdjB,EAAE,kBAAkBoB,QAAO,WACvBpB,EAxDI,oBAwDSC,YAAYG,KAAKiB,OAAO,MAAM,SAKvDrB,EAAEsB,UAAUC,GAAG,SAAU,eAAe,SAAUC,GAC9CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMnB,KAAK,YACtCiB,EAAcG,OAAO,WACrB7B,EAAEI,KAAK,CACHC,IAAKyB,kBACLC,KAAM,OACNxB,KAAMP,EAAE4B,MAAMI,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7BpC,EAAE,aAAaqC,MAAM,QACrBrC,EAAE,oBAAoBC,YAAYG,KAAKiB,OAAO,MAAM,KAG5DiB,MAAO,SAAUJ,GACbK,kBAAkB,uBAAwBL,IAE9CM,SAAU,WACNd,EAAcG,OAAO,eAKjC7B,EAAEsB,UAAUC,GAAG,SAAU,aAAa,SAAUC,GAC5CA,EAAMC,iBACN,IAAIC,EAAgBC,OAAOC,MAAMnB,KAAK,gBACtCiB,EAAcG,OAAO,WACrB,IAAIb,EAAKhB,EAAE,gBAAgBU,MAC3BV,EAAEI,KAAK,CACHC,IAAKC,cAAgB,IAAMU,EAC3Be,KAAM,MACNxB,KAAMP,EAAE4B,MAAMI,YACdC,QAAS,SAAUC,GACXA,EAAOD,UACPE,sBAAsBD,EAAOE,SAC7BpC,EAAE,cAAcqC,MAAM,QACtBrC,EAAE,oBAAoBC,YAAYG,KAAKiB,OAAO,MAAM,KAG5DiB,MAAO,SAAUJ,GACbO,wBAAwBP,IAE5BM,SAAU,WACNd,EAAcG,OAAO,eAKjC7B,EAAE,aAAauB,GAAG,mBAAmB,WACjCmB,eAAe,cAAe,2BAGlC1C,EAAE,cAAcuB,GAAG,mBAAmB,WAClCmB,eAAe,YAAa,+BAGhCC,OAAOC,WAAa,SAAU5B,GAC1BhB,EAAEI,KAAK,CACHC,IAAKC,cAAgB,IAAMU,EAAK,QAChCe,KAAM,MACNE,QAAS,SAAUC,GACf,GAAIA,EAAOD,QAAS,CAChB,IAAIY,EAAWX,EAAO3B,KACtBP,EAAE,gBAAgBU,IAAImC,EAAS7B,IAC/BhB,EAAE,cAAcU,IAAImC,EAAS5B,MACH,IAAvB4B,EAASrC,UACRR,EAAE,mBAAmB8C,KAAK,WAAW,GAErC9C,EAAE,mBAAmB8C,KAAK,WAAW,GACzC9C,EAAE,cAAcqC,MAAM,QACtBU,sBAGRT,MAAO,SAAUJ,GACbc,iBAAiBd,OAI7BlC,EAAEsB,UAAUC,GAAG,QAAS,aAAa,SAAUC,GAC3C,IAAIyB,kBAAJ,CAGAC,qBACA,IAAIC,EAAanD,EAAEwB,EAAM4B,eAAe7C,KAAK,MAC7CqC,WAAWO,OAGfnD,EAAEsB,UAAUC,GAAG,QAAS,eAAe,SAAUC,GAC7C,IAAI2B,EAAanD,EAAEwB,EAAM4B,eAAe7C,KAAK,MAC7C8C,WAAW/C,cAAgB,IAAM6C,EAAY,mBACzC,wBAIRnD,EAAEsB,UAAUC,GAAG,SAAU,cAAc,SAAUC,GAC7C,IAAI2B,EAAanD,EAAEwB,EAAM4B,eAAe7C,KAAK,MAC7C+C,uBAAuBH,MAI3BR,OAAOW,uBAAyB,SAAUtC,GACtChB,EAAEI,KAAK,CACHC,IAAKC,cAAgB,IAAMU,EAAK,mBAChCuC,OAAQ,OACRC,OAAO,EACPvB,QAAS,SAAUC,GACXA,EAAOD,SACPlC,EAAIK,KAAKiB,OAAO,MAAM,Q","file":"/assets/js/category/category.js","sourcesContent":["'use strict';\n\nlet tableName = '#categoriesTable';\nlet tbl = $('#categoriesTable').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'asc']],\n    ajax: {\n        url: categoriesUrl,\n        data: function (data) {\n            data.is_active = $('#filter_status').\n                find('option:selected').\n                val();\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [2],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '8%',\n        },\n        {\n            'targets': [1],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '8%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                let showLink = categoriesUrl + '/' + row.id;\n                return '<a href=\"' + showLink + '\">' + row.name +\n                    '</a>';\n            },\n            name: 'name',\n        },\n        {\n            data: function (row) {\n                let checked = row.is_active === 0 ? '' : 'checked';\n                let data = [{'id': row.id, 'checked' : checked }];\n                return prepareTemplateRender('#categoryActiveTemplate', data);\n            }, name: 'is_active',\n        },\n        {\n            data: function (row) {\n                let data = [{ 'id': row.id }];\n                return prepareTemplateRender('#categoryActionTemplate', data);\n            }, name: 'id',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#filter_status').change(function () {\n            $(tableName).DataTable().ajax.reload(null, true);\n        });\n    },\n});\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    $.ajax({\n        url: categoryCreateUrl,\n        type: 'POST',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addModal').modal('hide');\n                $('#categoriesTable').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            printErrorMessage('#validationErrorsBox', result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    })\n});\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    var id = $('#category_id').val();\n    $.ajax({\n        url: categoriesUrl + '/' + id,\n        type: 'put',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                $('#categoriesTable').DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            UnprocessableInputError(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    })\n});\n\n$('#addModal').on('hidden.bs.modal', function () {\n    resetModalForm('#addNewForm', '#validationErrorsBox');\n});\n\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editValidationErrorsBox');\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: categoriesUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let category = result.data;\n                $('#category_id').val(category.id);\n                $('#edit_name').val(category.name);\n                if(category.is_active === 1)\n                    $('#edit_is_active').prop('checked', true);\n                else\n                    $('#edit_is_active').prop('checked', false);\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    })\n};\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let categoryId = $(event.currentTarget).data('id');\n    renderData(categoryId);\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let categoryId = $(event.currentTarget).data('id');\n    deleteItem(categoriesUrl + '/' + categoryId, '#categoriesTable',\n        'Medicine Category');\n});\n\n// category activation deactivation change event\n$(document).on('change', '.is-active', function (event) {\n    let categoryId = $(event.currentTarget).data('id');\n    activeDeActiveCategory(categoryId);\n});\n\n// activate de-activate category\nwindow.activeDeActiveCategory = function (id) {\n    $.ajax({\n        url: categoriesUrl + '/' + id + '/active-deactive',\n        method: 'post',\n        cache: false,\n        success: function (result) {\n            if (result.success) {\n                tbl.ajax.reload(null, false);\n            }\n        },\n    })\n};\n"],"sourceRoot":""}