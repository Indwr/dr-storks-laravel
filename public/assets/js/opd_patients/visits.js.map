{"version":3,"sources":["webpack:///./resources/assets/js/opd_patients/visits.js"],"names":["tableName","$","DataTable","processing","serverSide","ajax","url","visitedOPDPatients","data","patient_id","id","opdPatientDepartmentId","columnDefs","render","length","substr","targets","defaultContent","columns","row","opdPatientUrl","opd_number","name","appointment_date","moment","format","getCurrentCurrencyClass","addCommas","standard_charge","doctorUrl","doctor_id","doctor","user","first_name","editLink","prepareTemplateRender","document","on","event","opdPatientId","currentTarget","deleteItem"],"mappings":"mBAEA,IAAIA,EAAY,0BAChBC,EAAED,GAAWE,UAAU,CACnBC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,SACdC,KAAM,CACFC,IAAKC,mBACLC,KAAM,CACFC,WACAC,GAAIC,yBAGZC,WAAY,CACR,CACI,QAAW,CAAC,GACZ,MAAS,MAEb,CACI,QAAW,CAAC,GACZ,UAAa,cACb,MAAS,MAEb,CACI,QAAW,CAAC,GACZ,UAAa,aACb,MAAS,OAEb,CACI,QAAW,CAAC,EAAG,GACf,MAAS,OAEb,CACI,QAAW,CAAC,EAAG,GACfC,OAAQ,SAAUL,GACd,GAAY,MAARA,EACA,OAAOA,EAAKM,OAAS,GACjBN,EAAKO,OAAO,EAAG,IAAM,MACrBP,IAIhB,CACIQ,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIV,KAAM,SAAUW,GAEZ,MAAO,aADQC,cAAgB,IAAMD,EAAIT,IACT,KAAOS,EAAIE,WACvC,QAERC,KAAM,cAEV,CACId,KAAM,SAAUW,GACZ,OAAOA,GAEXN,OAAQ,SAAUM,GACd,OAA6B,OAAzBA,EAAII,iBACG,MAGJC,OAAOL,EAAII,kBAAkBE,OAAO,qBAE/CH,KAAM,oBAEV,CACId,KAAM,SAAUW,GACZ,OAAOO,0BACHC,UAAUR,EAAIS,kBAEtBN,KAAM,mBAEV,CACId,KAAM,oBACNc,KAAM,gBAEV,CACId,KAAM,SAAUW,GAEZ,MAAO,aADQU,UAAY,IAAMV,EAAIW,WACL,KAC5BX,EAAIY,OAAOC,KAAKC,WAChB,QAERX,KAAM,0BAEV,CACId,KAAM,WACNc,KAAM,YAEV,CACId,KAAM,QACNc,KAAM,SAEV,CACId,KAAM,SAAUW,GACZ,IAAIe,EAAWd,cAAgB,IAAMD,EAAIT,GAAK,QAC1CF,EAAO,CACP,CACI,GAAMW,EAAIT,GACV,IAAOwB,IAGf,OAAOC,sBAAsB,2BAA4B3B,IAE7Dc,KAAM,4BAKlBrB,EAAEmC,UAAUC,GAAG,QAAS,qBAAqB,SAAUC,GACnD,IAAIC,EAAetC,EAAEqC,EAAME,eAAehC,KAAK,MAC/CiC,WAAWrB,cAAgB,IAAMmB,EAAcvC,EAAW,mB","file":"/assets/js/opd_patients/visits.js","sourcesContent":["'use strict';\n\nlet tableName = '#visitedOPDPatientTable';\n$(tableName).DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'desc']],\n    ajax: {\n        url: visitedOPDPatients,\n        data: {\n            patient_id: patient_id,\n            id: opdPatientDepartmentId,\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [0],\n            'width': '8%',\n        },\n        {\n            'targets': [7],\n            'className': 'text-center',\n            'width': '5%',\n        },\n        {\n            'targets': [2],\n            'className': 'text-right',\n            'width': '12%',\n        },\n        {\n            'targets': [1, 3],\n            'width': '12%',\n        },\n        {\n            'targets': [5, 6],\n            render: function (data) {\n                if (data != null) {\n                    return data.length > 30 ?\n                        data.substr(0, 30) + '...' :\n                        data;\n                }\n            },\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                let showLink = opdPatientUrl + '/' + row.id;\n                return '<a href=\"' + showLink + '\">' + row.opd_number +\n                    '</a>';\n            },\n            name: 'opd_number',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                if (row.appointment_date === null) {\n                    return 'N/A';\n                }\n\n                return moment(row.appointment_date).format('Do MMM, Y h:mm A');\n            },\n            name: 'appointment_date',\n        },\n        {\n            data: function (row) {\n                return getCurrentCurrencyClass() +\n                    addCommas(row.standard_charge);\n            },\n            name: 'standard_charge',\n        },\n        {\n            data: 'payment_mode_name',\n            name: 'payment_mode',\n        },\n        {\n            data: function (row) {\n                let showLink = doctorUrl + '/' + row.doctor_id;\n                return '<a href=\"' + showLink + '\">' +\n                    row.doctor.user.first_name +\n                    '</a>';\n            },\n            name: 'doctor.user.first_name',\n        },\n        {\n            data: 'symptoms',\n            name: 'symptoms',\n        },\n        {\n            data: 'notes',\n            name: 'notes',\n        },\n        {\n            data: function (row) {\n                let editLink = opdPatientUrl + '/' + row.id + '/edit';\n                let data = [\n                    {\n                        'id': row.id,\n                        'url': editLink,\n                    }];\n\n                return prepareTemplateRender('#opdVisitsActionTemplate', data);\n            },\n            name: 'doctor.user.last_name',\n        },\n    ],\n});\n\n$(document).on('click', '.delete-visit-btn', function (event) {\n    let opdPatientId = $(event.currentTarget).data('id');\n    deleteItem(opdPatientUrl + '/' + opdPatientId, tableName, 'OPD Patient');\n});\n"],"sourceRoot":""}