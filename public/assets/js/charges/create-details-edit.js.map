{"version":3,"sources":["webpack:///./resources/assets/js/charges/create-details-edit.js"],"names":["$","document","ready","select2","width","on","focus","window","changeChargeCategory","selector","id","ajax","url","changeChargeTypeUrl","type","dataType","data","success","empty","each","i","v","append","attr","text","this","val","event","ajaxCallIsRunning","ajaxCallInProgress","chargeId","currentTarget","renderData","chargeUrl","result","charge_type","trigger","code","description","addCommas","standard_charge","setTimeout","charge_category_id","modal","ajaxCallCompleted","error","manageAjaxErrors","preventDefault","loadingButton","jQuery","find","button","serialize","displaySuccessMessage","message","location","reload","UnprocessableInputError","complete","resetModalForm"],"mappings":"AAAAA,EAAEC,UAAUC,OAAM,WACd,aAEAF,EAAE,uFACEG,QAAQ,CACJC,MAAO,SAGfJ,EAAE,yBAAyBK,GAAG,kBAAkB,WAC5CL,EAAE,0CAA0CM,WAGhDC,OAAOC,qBAAuB,SAAUC,EAAUC,GAC9CV,EAAEW,KAAK,CACHC,IAAKC,oBACLC,KAAM,MACNC,SAAU,OACVC,KAAM,CAAEN,GAAIA,GACZO,QAAS,SAAUD,GACfhB,EAAES,GAAUS,QACZlB,EAAEmB,KAAKH,EAAKA,MAAM,SAAUI,EAAGC,GAC3BrB,EAAES,GACEa,OAAOtB,EAAE,qBAAqBuB,KAAK,QAASH,GAAGI,KAAKH,WAMxErB,EAAE,qBAAqBK,GAAG,UAAU,WAChCG,qBAAqB,wBAAyBR,EAAEyB,MAAMC,UAG1D1B,EAAEC,UAAUI,GAAG,QAAS,aAAa,SAAUsB,GAC3C,IAAIC,kBAAJ,CAGAC,qBACA,IAAIC,EAAW9B,EAAE2B,EAAMI,eAAef,KAAK,MAC3CgB,WAAWF,OAGfvB,OAAOyB,WAAa,SAAUtB,GAC1BV,EAAEW,KAAK,CACHC,IAAKqB,UAAY,IAAMvB,EAAK,QAC5BI,KAAM,MACNG,QAAS,SAAUiB,GACXA,EAAOjB,UACPjB,EAAE,aAAa0B,IAAIQ,EAAOlB,KAAKN,IAC/BV,EAAE,qBACE0B,IAAIQ,EAAOlB,KAAKmB,aAChBC,QAAQ,kBACZ5B,qBAAqB,wBACjB0B,EAAOlB,KAAKmB,aAChBnC,EAAE,aAAa0B,IAAIQ,EAAOlB,KAAKqB,MAC/BrC,EAAE,oBAAoB0B,IAAIQ,EAAOlB,KAAKsB,aACtCtC,EAAE,kBACE0B,IAAIa,UAAUL,EAAOlB,KAAKwB,kBAC9BC,YAAW,WACPzC,EAAE,yBACE0B,IAAIQ,EAAOlB,KAAK0B,oBAChBN,QAAQ,oBACb,KACHpC,EAAE,cAAc2C,MAAM,QACtBC,sBAGRC,MAAO,SAAUX,GACbY,iBAAiBZ,OAK7BlC,EAAEC,UAAUI,GAAG,SAAU,aAAa,SAAUsB,GAC5CA,EAAMoB,iBACN,IAAIC,EAAgBC,OAAOxB,MAAMyB,KAAK,gBACtCF,EAAcG,OAAO,WACrB,IAAIzC,EAAKV,EAAE,aAAa0B,MACxB1B,EAAEW,KAAK,CACHC,IAAKqB,UAAY,IAAMvB,EACvBI,KAAM,QACNE,KAAMhB,EAAEyB,MAAM2B,YACdnC,QAAS,SAAUiB,GACXA,EAAOjB,UACPoC,sBAAsBnB,EAAOoB,SAC7BtD,EAAE,cAAc2C,MAAM,QACtBF,YAAW,WACPlC,OAAOgD,SAASC,WACjB,OAGXX,MAAO,SAAUX,GACbuB,wBAAwBvB,IAE5BwB,SAAU,WACNV,EAAcG,OAAO,eAKjCnD,EAAE,cAAcK,GAAG,mBAAmB,WAClCsD,eAAe,YAAa,4BAC5B3D,EAAE,2CACE0B,IAAI,IACJU,QAAQ","file":"/assets/js/charges/create-details-edit.js","sourcesContent":["$(document).ready(function () {\n    'use strict';\n\n    $('#chargeTypeId,#chargeCategoryId,#editChargeTypeId,#editChargeCategoryId,#chargeType').\n        select2({\n            width: '100%',\n        });\n\n    $('#addModal, #editModal').on('shown.bs.modal', function () {\n        $('#chargeTypeId, #editChargeTypeId:first').focus();\n    });\n\n    window.changeChargeCategory = function (selector, id) {\n        $.ajax({\n            url: changeChargeTypeUrl,\n            type: 'get',\n            dataType: 'json',\n            data: { id: id },\n            success: function (data) {\n                $(selector).empty();\n                $.each(data.data, function (i, v) {\n                    $(selector).\n                        append($('<option></option>').attr('value', i).text(v));\n                });\n            },\n        });\n    };\n\n    $('#editChargeTypeId').on('change', function () {\n        changeChargeCategory('#editChargeCategoryId', $(this).val());\n    });\n\n    $(document).on('click', '.edit-btn', function (event) {\n        if (ajaxCallIsRunning) {\n            return;\n        }\n        ajaxCallInProgress();\n        let chargeId = $(event.currentTarget).data('id');\n        renderData(chargeId);\n    });\n\n    window.renderData = function (id) {\n        $.ajax({\n            url: chargeUrl + '/' + id + '/edit',\n            type: 'GET',\n            success: function (result) {\n                if (result.success) {\n                    $('#chargeId').val(result.data.id);\n                    $('#editChargeTypeId').\n                        val(result.data.charge_type).\n                        trigger('change.select2');\n                    changeChargeCategory('#editChargeCategoryId',\n                        result.data.charge_type);\n                    $('#editCode').val(result.data.code);\n                    $('#editDescription').val(result.data.description);\n                    $('#editStdCharge').\n                        val(addCommas(result.data.standard_charge));\n                    setTimeout(function () {\n                        $('#editChargeCategoryId').\n                            val(result.data.charge_category_id).\n                            trigger('change.select2');\n                    }, 2000);\n                    $('#editModal').modal('show');\n                    ajaxCallCompleted();\n                }\n            },\n            error: function (result) {\n                manageAjaxErrors(result);\n            },\n        });\n    };\n\n    $(document).on('submit', '#editForm', function (event) {\n        event.preventDefault();\n        var loadingButton = jQuery(this).find('#btnEditSave');\n        loadingButton.button('loading');\n        let id = $('#chargeId').val();\n        $.ajax({\n            url: chargeUrl + '/' + id,\n            type: 'patch',\n            data: $(this).serialize(),\n            success: function (result) {\n                if (result.success) {\n                    displaySuccessMessage(result.message);\n                    $('#editModal').modal('hide');\n                    setTimeout(function () {\n                        window.location.reload();\n                    }, 3000);\n                }\n            },\n            error: function (result) {\n                UnprocessableInputError(result);\n            },\n            complete: function () {\n                loadingButton.button('reset');\n            },\n        });\n    });\n\n    $('#editModal').on('hidden.bs.modal', function () {\n        resetModalForm('#editForm', '#editValidationErrorsBox');\n        $('#editChargeTypeId,#editChargeCategoryId').\n            val('').\n            trigger('change.select2');\n    });\n});\n"],"sourceRoot":""}