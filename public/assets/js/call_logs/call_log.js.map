{"version":3,"sources":["webpack:///./resources/assets/js/call_logs/call_log.js"],"names":["tableName","$","DataTable","processing","serverSide","ajax","url","callLogUrl","data","call_type","find","val","columnDefs","targets","defaultContent","columns","name","row","isEmpty","phone","render","date","moment","format","follow_up_date","callTypeIncoming","incoming","outgoing","id","prepareTemplateRender","change","reload","select2","document","on","event","callLogId","currentTarget","deleteItem"],"mappings":"mBAEA,IAAIA,EAAY,cACNC,EAAE,eAAeC,UAAU,CACjCC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,QACdC,KAAM,CACFC,IAAKC,WACLC,KAAM,SAAUA,GACZA,EAAKC,UAAYR,EAAE,aAAaS,KAAK,mBAAmBC,QAGhEC,WAAY,CACR,CACI,QAAW,CAAC,GACZ,WAAa,EACb,UAAa,cACb,MAAS,MAEb,CACIC,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIP,KAAM,OACNQ,KAAM,QAEV,CACIR,KAAM,SAAUS,GACZ,OAAOC,QAAQD,EAAIE,OAAS,MAAQF,EAAIE,OAE5CH,KAAM,SAEV,CACIR,KAAM,SAAUS,GACZ,OAAOA,GAEXG,OAAQ,SAAUH,GACd,OAAiB,OAAbA,EAAII,KACG,MAGJC,OAAOL,EAAII,MAAME,OAAO,cAEnCP,KAAM,QAEV,CACIR,KAAM,SAAUS,GACZ,OAAOA,GAEXG,OAAQ,SAAUH,GACd,OAA2B,OAAvBA,EAAIO,eACG,MAGJF,OAAOL,EAAIO,gBAAgBD,OAAO,cAE7CP,KAAM,kBAEV,CACIR,KAAM,SAAUS,GACZ,OAAIA,EAAIR,WAAagB,iBACVC,SAEAC,UAGfX,KAAM,aAEV,CACIR,KAAM,SAAUS,GACZ,IAAIX,EAAMC,WAAaU,EAAIW,GACvBpB,EAAO,CACP,CACI,GAAMS,EAAIW,GACV,IAAOtB,EAAM,UAErB,OAAOuB,sBAAsB,yBAA0BrB,IACxDQ,KAAM,OAGjB,eAAkB,WACdf,EAAE,aAAa6B,QAAO,WAClB7B,EAAED,GAAWE,YAAYG,KAAK0B,OAAO,MAAM,SAKvD9B,EAAE,aAAa+B,UAEf/B,EAAEgC,UAAUC,GAAG,QAAS,eAAe,SAAUC,GAC7C,IAAIC,EAAYnC,EAAEkC,EAAME,eAAe7B,KAAK,MAC5C8B,WAAW/B,WAAa6B,EAAWpC,EAAW,gB","file":"/assets/js/call_logs/call_log.js","sourcesContent":["'use strict';\n\nlet tableName = '#callLogTbl';\nlet tbl = $('#callLogTbl').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'asc']],\n    ajax: {\n        url: callLogUrl,\n        data: function (data) {\n            data.call_type = $('#callType').find('option:selected').val();\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [5],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '8%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: 'name',\n            name: 'name',\n        },\n        {\n            data: function (row) {\n                return isEmpty(row.phone) ? 'N/A' : row.phone;\n            },\n            name: 'phone',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                if (row.date === null) {\n                    return 'N/A';\n                }\n\n                return moment(row.date).format('Do MMM, Y');\n            },\n            name: 'date',\n        },\n        {\n            data: function (row) {\n                return row;\n            },\n            render: function (row) {\n                if (row.follow_up_date === null) {\n                    return 'N/A';\n                }\n\n                return moment(row.follow_up_date).format('Do MMM, Y');\n            },\n            name: 'follow_up_date',\n        },\n        {\n            data: function (row) {\n                if (row.call_type == callTypeIncoming) {\n                    return incoming;\n                } else {\n                    return outgoing;\n                }\n            },\n            name: 'call_type',\n        },\n        {\n            data: function (row) {\n                let url = callLogUrl + row.id;\n                let data = [\n                    {\n                        'id': row.id,\n                        'url': url + '/edit',\n                    }];\n                return prepareTemplateRender('#callLogActionTemplate', data);\n            }, name: 'id',\n        },\n    ],\n    'fnInitComplete': function () {\n        $('#callType').change(function () {\n            $(tableName).DataTable().ajax.reload(null, true);\n        });\n    },\n});\n\n$('#callType').select2();\n\n$(document).on('click', '.delete-btn', function (event) {\n    let callLogId = $(event.currentTarget).data('id');\n    deleteItem(callLogUrl + callLogId, tableName, 'Call Log');\n});\n\n"],"sourceRoot":""}