{"version":3,"sources":["webpack:///./resources/assets/js/departments/departments.js"],"names":["tableName","$","DataTable","processing","serverSide","ajax","url","departmentUrl","data","is_active","find","val","columnDefs","targets","defaultContent","columns","name","row","checked","id","prepareTemplateRender","change","reload","page","draw","document","on","event","departmentId","currentTarget","updateStatus","window","method","cache","success","result","preventDefault","loadingButton","jQuery","this","button","departmentCreateUrl","newRecord","editRecordWithForm","renderData","deleteItem","type","prop","modal","error","manageAjaxErrors","select2","width"],"mappings":"mBAEA,IAAIA,EAAY,qBAChBC,EAAED,GAAWE,UAAU,CACnBC,YAAY,EACZC,YAAY,EACZ,MAAS,CAAC,CAAC,EAAG,QACdC,KAAM,CACFC,IAAKC,cACLC,KAAM,SAAUA,GACZA,EAAKC,UAAYR,EAAE,kBACfS,KAAK,mBACLC,QAGZC,WAAY,CACR,CACI,QAAW,CAAC,EAAG,GACf,WAAa,EACb,UAAa,cACb,MAAS,MAEb,CACIC,QAAS,OACTC,eAAgB,QAGxBC,QAAS,CACL,CACIP,KAAM,OACNQ,KAAM,QAEV,CACIR,KAAM,SAAUS,GACZ,IAAIC,EAA2B,GAAjBD,EAAIR,UAAiB,GAAK,UACpCD,EAAO,CAAC,CAAE,GAAMS,EAAIE,GAAI,QAAWD,IACvC,OAAOE,sBAAsB,8BAA+BZ,IAEhEQ,KAAM,aAEV,CACIR,KAAM,SAAUS,GACZ,IAAIT,EAAO,CAAC,CAAE,GAAMS,EAAIE,KACxB,OAAOC,sBAAsB,4BAA6BZ,IAC3DQ,KAAM,OAGjB,eAAkB,WACdf,EAAE,kBAAkBoB,QAAO,WACvBpB,EAAED,GAAWE,YAAYG,KAAKiB,OAAO,MAAM,GAC3CrB,EAAED,GAAWE,YAAYqB,KAAM,YAAaC,KAAM,cAK9DvB,EAAEwB,UAAUC,GAAG,SAAU,cAAc,SAAUC,GAC7C,IAAIC,EAAe3B,EAAE0B,EAAME,eAAerB,KAAK,MAC/CsB,aAAaF,MAGjBG,OAAOD,aAAe,SAAUX,GAC5BlB,EAAEI,KAAK,CACHC,IAAKC,cAAgBY,EAAK,mBAC1Ba,OAAQ,OACRC,OAAO,EACPC,QAAS,SAAUC,GACXA,EAAOD,SACPjC,EAAED,GAAWE,YAAYG,KAAKiB,OAAO,MAAM,OAM3DrB,EAAEwB,UAAUC,GAAG,SAAU,eAAe,SAAUC,GAC9CA,EAAMS,iBACN,IAAIC,EAAgBC,OAAOC,MAAM7B,KAAK,YACtC2B,EAAcG,OAAO,WACrB,IAAIhC,EAAO,CACP,aAAgBP,EAAEsC,MAClB,IAAOE,oBACP,KAAQ,OACR,cAAiBzC,GAErB0C,UAAUlC,EAAM6B,MAGpBpC,EAAEwB,UAAUC,GAAG,SAAU,aAAa,SAAUC,GAC5CA,EAAMS,iBACN,IAAIC,EAAgBC,OAAOC,MAAM7B,KAAK,gBACtC2B,EAAcG,OAAO,WACrB,IAAIrB,EAAKlB,EAAE,iBAAiBU,MACxBL,EAAMC,cAAgBY,EACtBX,EAAO,CACP,aAAgBP,EAAEsC,MAClB,IAAOjC,EACP,KAAQ,MACR,cAAiBN,GAErB2C,mBAAmBnC,EAAM6B,MAG7BpC,EAAEwB,UAAUC,GAAG,QAAS,aAAa,SAAUC,GAC3C,IAAIC,EAAe3B,EAAE0B,EAAME,eAAerB,KAAK,MAC/CoC,WAAWhB,MAGf3B,EAAEwB,UAAUC,GAAG,QAAS,eAAe,SAAUC,GAC7C,IAAIR,EAAKlB,EAAE0B,EAAME,eAAerB,KAAK,MACrCqC,WAAWtC,cAAgBY,EAAInB,EAAW,iBAG9C+B,OAAOa,WAAa,SAAUzB,GAC1BlB,EAAEI,KAAK,CACHC,IAAKC,cAAgBY,EAAK,QAC1B2B,KAAM,MACNZ,QAAS,SAAUC,GACXA,EAAOD,UACPjC,EAAE,iBAAiBU,IAAIwB,EAAO3B,KAAKW,IACnClB,EAAE,aAAaU,IAAIwB,EAAO3B,KAAKQ,MAC3BmB,EAAO3B,KAAKC,WACZR,EAAE,iBAAiBU,IAAI,GAAGoC,KAAK,WAAW,GAE9C9C,EAAE,cAAc+C,MAAM,UAG9BC,MAAO,SAAUd,GACbe,iBAAiBf,OAK7BlC,EAAE,kBAAkBkD,QAAQ,CACxBC,MAAO,U","file":"/assets/js/departments/departments.js","sourcesContent":["'use strict';\n\nlet tableName = '#departments-table';\n$(tableName).DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[0, 'asc']],\n    ajax: {\n        url: departmentUrl,\n        data: function (data) {\n            data.is_active = $('#filter_active').\n                find('option:selected').\n                val()\n        },\n    },\n    columnDefs: [\n        {\n            'targets': [1, 2],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '6%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: 'name',\n            name: 'name',\n        },\n        {\n            data: function (row) {\n                let checked = row.is_active == 0 ? '' : 'checked';\n                let data = [{ \"id\": row.id, \"checked\": checked }];\n                return prepareTemplateRender(\"#departmentIsActiveTemplate\", data);\n            },\n            name: 'is_active',\n        },\n        {\n            data: function (row) {\n                let data = [{ \"id\": row.id }];\n                return prepareTemplateRender(\"#departmentActionTemplate\", data);\n            }, name: 'id'\n        }\n    ],\n    'fnInitComplete': function () {\n        $('#filter_active').change(function () {\n            $(tableName).DataTable().ajax.reload(null, false);\n            $(tableName).DataTable().page( 'previous' ).draw( 'page' );\n        });\n    },\n});\n\n$(document).on('change', '.is-active', function (event) {\n    let departmentId = $(event.currentTarget).data('id');\n    updateStatus(departmentId);\n});\n\nwindow.updateStatus = function (id) {\n    $.ajax({\n        url: departmentUrl + id + '/active-deactive',\n        method: 'post',\n        cache: false,\n        success: function (result) {\n            if (result.success) {\n                $(tableName).DataTable().ajax.reload(null, false);\n            }\n        },\n    })\n};\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find(\"#btnSave\");\n    loadingButton.button('loading');\n    let data = {\n        'formSelector': $(this),\n        'url': departmentCreateUrl,\n        'type': 'POST',\n        'tableSelector': tableName\n    };\n    newRecord(data, loadingButton);\n});\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find(\"#btnEditSave\");\n    loadingButton.button('loading');\n    let id = $('#departmentId').val();\n    let url = departmentUrl + id;\n    let data = {\n        'formSelector': $(this),\n        'url': url,\n        'type': 'PUT',\n        'tableSelector': tableName\n    };\n    editRecordWithForm(data, loadingButton);\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    let departmentId = $(event.currentTarget).data('id');\n    renderData(departmentId);\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let id = $(event.currentTarget).data('id');\n    deleteItem(departmentUrl + id, tableName, 'Department');\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: departmentUrl + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#departmentId').val(result.data.id);\n                $('#editName').val(result.data.name);\n                if (result.data.is_active) {\n                    $('#editIsActive').val(1).prop('checked', true);\n                }\n                $('#EditModal').modal('show');\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$('#filter_active').select2({\n    width: '100%',\n});\n"],"sourceRoot":""}