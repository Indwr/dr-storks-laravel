{"version":3,"sources":["webpack:///./resources/assets/js/advanced_payments/advanced_payments_edit.js"],"names":["$","document","ready","select2","width","datetimepicker","DatetimepickerDefaults","format","useCurrent","sideBySide","minDate","moment","on","focus","event","ajaxCallIsRunning","ajaxCallInProgress","advancedPaymentId","currentTarget","data","renderData","window","id","ajax","url","advancedPaymentUrl","type","success","result","val","patient_id","trigger","receipt_no","amount","date","modal","ajaxCallCompleted","error","manageAjaxErrors","preventDefault","loadingButton","jQuery","this","find","button","serialize","displaySuccessMessage","message","setTimeout","location","reload","complete","resetModalForm"],"mappings":"AAAAA,EAAEC,UAAUC,OAAM,WACd,aAEAF,EAAE,6BAA6BG,QAAQ,CACnCC,MAAO,SAEXJ,EAAE,aAAaK,eAAeC,uBAAuB,CACjDC,OAAQ,aACRC,YAAY,EACZC,YAAY,EACZC,QAASC,YAEbX,EAAE,yBAAyBY,GAAG,kBAAkB,WAC5CZ,EAAE,oCAAoCa,cAI9Cb,EAAEC,UAAUW,GAAG,QAAS,aAAa,SAAUE,GAC3C,IAAIC,kBAAJ,CAGAC,qBACA,IAAIC,EAAoBjB,EAAEc,EAAMI,eAAeC,KAAK,MACpDC,WAAWH,OAGfI,OAAOD,WAAa,SAAUE,GAC1BtB,EAAEuB,KAAK,CACHC,IAAKC,mBAAqB,IAAMH,EAAK,QACrCI,KAAM,MACNC,QAAS,SAAUC,GACXA,EAAOD,UACP3B,EAAE,qBAAqB6B,IAAID,EAAOT,KAAKG,IACvCtB,EAAE,kBACE6B,IAAID,EAAOT,KAAKW,YAChBC,QAAQ,kBACZ/B,EAAE,kBAAkB6B,IAAID,EAAOT,KAAKa,YACpChC,EAAE,eAAe6B,IAAID,EAAOT,KAAKc,QACjCjC,EAAE,gBAAgB+B,QAAQ,SAC1B/B,EAAE,aAAa6B,IAAItB,OAAOqB,EAAOT,KAAKe,KAAM,eAC5ClC,EAAE,cAAcmC,MAAM,QACtBC,sBAGRC,MAAO,SAAUT,GACbU,iBAAiBV,OAK7B5B,EAAEC,UAAUW,GAAG,SAAU,aAAa,SAAUE,GAC5CA,EAAMyB,iBACN,IAAIC,EAAgBC,OAAOC,MAAMC,KAAK,gBACtCH,EAAcI,OAAO,WACrB,IAAItB,EAAKtB,EAAE,qBAAqB6B,MAChC7B,EAAEuB,KAAK,CACHC,IAAKC,mBAAqB,IAAMH,EAChCI,KAAM,QACNP,KAAMnB,EAAE0C,MAAMG,YACdlB,QAAS,SAAUC,GACXA,EAAOD,UACPmB,sBAAsBlB,EAAOmB,SAC7B/C,EAAE,cAAcmC,MAAM,QACtBa,YAAW,WACP3B,OAAO4B,SAASC,WACjB,OAGXb,MAAO,SAAUT,GACbU,iBAAiBV,IAErBuB,SAAU,WACNX,EAAcI,OAAO,eAKjC5C,EAAE,cAAcY,GAAG,mBAAmB,WAClCwC,eAAe,YAAa","file":"/assets/js/advanced_payments/advanced_payments_edit.js","sourcesContent":["$(document).ready(function () {\n    'use strict';\n\n    $('#patientId,#editPatientId').select2({\n        width: '100%',\n    });\n    $('#editDate').datetimepicker(DatetimepickerDefaults({\n        format: 'YYYY-MM-DD',\n        useCurrent: true,\n        sideBySide: true,\n        minDate: moment(),\n    }));\n    $('#addModal, #editModal').on('shown.bs.modal', function () {\n        $('#patientId, #editPatientId:first').focus();\n    });\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let advancedPaymentId = $(event.currentTarget).data('id');\n    renderData(advancedPaymentId);\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: advancedPaymentUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                $('#advancePaymentId').val(result.data.id);\n                $('#editPatientId').\n                    val(result.data.patient_id).\n                    trigger('change.select2');\n                $('#editReceiptNo').val(result.data.receipt_no);\n                $('#editAmount').val(result.data.amount);\n                $('.price-input').trigger('input');\n                $('#editDate').val(format(result.data.date, 'YYYY-MM-DD'));\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    var loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#advancePaymentId').val();\n    $.ajax({\n        url: advancedPaymentUrl + '/' + id,\n        type: 'patch',\n        data: $(this).serialize(),\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                setTimeout(function () {\n                    window.location.reload();\n                }, 3000);\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editValidationErrorsBox');\n});\n"],"sourceRoot":""}