{"version":3,"sources":["webpack:///./resources/assets/js/testimonials/testimonial.js"],"names":["tableName","$","DataTable","processing","serverSide","ajax","url","testimonialUrl","columnDefs","targets","defaultContent","columns","data","row","document_url","name","id","prepareTemplateRender","document","on","event","preventDefault","loadingButton","jQuery","this","find","button","formData","FormData","testimonialCreateUrl","type","dataType","processData","contentType","success","result","displaySuccessMessage","message","modal","reload","error","printErrorMessage","complete","ajaxCallIsRunning","ajaxCallInProgress","testimonialId","currentTarget","renderData","window","split","pop","toLowerCase","attr","defaultDocumentImageUrl","val","description","isEmpty","text","html","ajaxCallCompleted","manageAjaxErrors","resetModalForm","show","addClass","deleteItem","extension","isValidDocument","displayDocument","inputSelector","validationMessageSelector","ext","inArray","profileError","removeClass"],"mappings":"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","file":"/assets/js/testimonials/testimonial.js","sourcesContent":["'use strict';\n\nlet tableName = '#testimonialTbl';\nlet tbl = $('#testimonialTbl').DataTable({\n    processing: true,\n    serverSide: true,\n    'order': [[1, 'asc']],\n    ajax: {\n        url: testimonialUrl,\n    },\n    columnDefs: [\n        {\n            'targets': [0, 3],\n            'orderable': false,\n            'className': 'text-center',\n            'width': '8%',\n        },\n        {\n            targets: '_all',\n            defaultContent: 'N/A',\n        },\n    ],\n    columns: [\n        {\n            data: function (row) {\n                return `<img src=\"${row.document_url}\" class=\"user-img image-stretching\">`;\n            },\n            name: 'id',\n        },\n        {\n            data: 'name',\n            name: 'name',\n        },\n        {\n            data: 'description',\n            name: 'description',\n        },\n        {\n            data: function (row) {\n                let data = [{ 'id': row.id }];\n                return prepareTemplateRender('#testimonialActionTemplate',\n                    data);\n            }, name: 'id',\n        },\n    ],\n});\n\n$(document).on('submit', '#addNewForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnSave');\n    loadingButton.button('loading');\n    let formData = new FormData($(this)[0]);\n    $.ajax({\n        url: testimonialCreateUrl,\n        type: 'POST',\n        dataType: 'json',\n        data: formData,\n        processData: false,\n        contentType: false,\n        success: function success (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#addModal').modal('hide');\n                $(tableName).DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function error (result) {\n            printErrorMessage('#validationErrorsBox', result);\n        },\n        complete: function complete () {\n            loadingButton.button('reset');\n        },\n    });\n\n});\n\n$(document).on('click', '.edit-btn', function (event) {\n    if (ajaxCallIsRunning) {\n        return;\n    }\n    ajaxCallInProgress();\n    let testimonialId = $(event.currentTarget).data('id');\n    renderData(testimonialId);\n});\n\nwindow.renderData = function (id) {\n    $.ajax({\n        url: testimonialUrl + '/' + id + '/edit',\n        type: 'GET',\n        success: function (result) {\n            if (result.success) {\n                let ext = result.data.document_url.split('.').\n                    pop().\n                    toLowerCase();\n                if (ext == '') {\n                    $('#editPreviewImage').\n                        attr('src', defaultDocumentImageUrl);\n                } else {\n                    $('#editPreviewImage').\n                        attr('src', result.data.document_url);\n                }\n                $('#testimonialId').val(result.data.id);\n                $('#editName').val(result.data.name);\n                $('#editDescription').val(result.data.description);\n                if (isEmpty(result.data.document_url)) {\n                    $('#documentUrl').text('');\n                } else {\n                    $('#documentUrl').html('View');\n                    $('#documentUrl').\n                        attr('href', result.data.document_url);\n                }\n                $('#editModal').modal('show');\n                ajaxCallCompleted();\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n    });\n};\n\n$(document).on('submit', '#editForm', function (event) {\n    event.preventDefault();\n    let loadingButton = jQuery(this).find('#btnEditSave');\n    loadingButton.button('loading');\n    let id = $('#testimonialId').val();\n    let formData = new FormData($(this)[0]);\n    $.ajax({\n        url: testimonialUrl + '/' + id,\n        type: 'post',\n        data: formData,\n        processData: false,\n        contentType: false,\n        success: function (result) {\n            if (result.success) {\n                displaySuccessMessage(result.message);\n                $('#editModal').modal('hide');\n                $(tableName).DataTable().ajax.reload(null, false);\n            }\n        },\n        error: function (result) {\n            manageAjaxErrors(result);\n        },\n        complete: function () {\n            loadingButton.button('reset');\n        },\n    });\n});\n\n$('#addModal').on('hidden.bs.modal', function () {\n    resetModalForm('#addNewForm', '#addModal #validationErrorsBox');\n    $('#previewImage').attr('src', defaultDocumentImageUrl);\n});\n\n$('#addModal').on('shown.bs.modal', function () {\n    $('#addModal #validationErrorsBox').show();\n    $('#addModal #validationErrorsBox').addClass('d-none');\n});\n\n$('#editModal').on('hidden.bs.modal', function () {\n    resetModalForm('#editForm', '#editModal #editValidationErrorsBox');\n    $('#previewImage').attr('src', defaultDocumentImageUrl);\n});\n\n$('#editModal').on('shown.bs.modal', function () {\n    $('#editModal #editValidationErrorsBox').show();\n    $('#editModal #editValidationErrorsBox').addClass('d-none');\n});\n\n$(document).on('click', '.delete-btn', function (event) {\n    let testimonialId = $(event.currentTarget).data('id');\n    deleteItem(testimonialUrl + '/' + testimonialId, tableName, 'Testimonial');\n});\n\n$(document).on('change', '#profile', function () {\n    let extension = isValidDocument($(this), '#addModal #validationErrorsBox');\n    if (!isEmpty(extension) && extension != false) {\n        displayDocument(this, '#previewImage', extension);\n    }\n});\n\n$(document).on('change', '#editProfile', function () {\n    let extension = isValidDocument($(this),\n        '#editModal #editValidationErrorsBox');\n    if (!isEmpty(extension) && extension != false) {\n        displayDocument(this, '#editPreviewImage', extension);\n    }\n});\n\nwindow.isValidDocument = function (\n    inputSelector, validationMessageSelector) {\n    let ext = $(inputSelector).val().split('.').pop().toLowerCase();\n    if ($.inArray(ext, ['png', 'jpg', 'jpeg']) ==\n        -1) {\n        $(inputSelector).val('');\n        $(validationMessageSelector).\n            html(profileError).\n            removeClass('d-none');\n        return false;\n    }\n    $(validationMessageSelector).\n        html(profileError).\n        addClass('d-none');\n    return ext;\n};\n"],"sourceRoot":""}